<!doctype html>
<html lang="zh-CN">









<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <!-- ä¼˜å…ˆä½¿ç”¨ IE æœ€æ–°ç‰ˆæœ¬å’Œ Chrome -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <!-- ä¸ºç§»åŠ¨è®¾å¤‡æ·»åŠ  viewport -->
  <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <!-- æ·»åŠ åˆ°ä¸»å±åçš„æ ‡é¢˜ï¼ˆiOS 6 æ–°å¢ï¼‰ -->
  <meta name="apple-mobile-web-app-title" content="WebGLå­¦ä¹ (2) - 3Dåœºæ™¯ - Jeff's world">
  <!-- æ˜¯å¦å¯ç”¨ WebApp å…¨å±æ¨¡å¼ï¼Œåˆ é™¤è‹¹æœé»˜è®¤çš„å·¥å…·æ å’Œèœå•æ  -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <!-- è®¾ç½®è‹¹æœå·¥å…·æ é¢œè‰² -->
  <meta name="apple-mobile-web-app-status-bar-style" content = "black" />
  <!-- æ·»åŠ æ™ºèƒ½ App å¹¿å‘Šæ¡ Smart App Bannerï¼ˆiOS 6+ Safariï¼‰ -->
  <!-- <meta name = "apple-itunes-app" content = "app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL"> -->
  <!-- å¿½ç•¥é¡µé¢ä¸­çš„æ•°å­—è¯†åˆ«ä¸ºç”µè¯ï¼Œå¿½ç•¥emailè¯†åˆ« -->
  <meta name="format-detection" content = "telphone=no, email=no" />
  <!--ä¸‹é¢ä¸‰ä¸ªæ˜¯æ¸…é™¤ç¼“å­˜ å¾®ä¿¡æµè§ˆå™¨ç¼“å­˜ä¸¥é‡åˆæ— åˆ·æ–°ï¼›è¿™ä¸ªæ–¹æ³•è°ƒè¯•çš„æ—¶å€™å¾ˆæ–¹ä¾¿-->
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta http-equiv="Expires" content="0">
  
  <link rel="dns-prefetch" href="https://edwardzhong.github.io">
  <link rel="icon shortcut" type="image/ico" href="/favicon.ico">
  <meta name="author" content="Jeff Zhong">
  <meta name="description" content="it's a blog by hexo">
  <meta name="keywords" content="hexo theme">
  <title >WebGLå­¦ä¹ (2) - 3Dåœºæ™¯ - Jeff's world</title>
    <!-- The Open Graph protocol -->
  <meta property="og:url" content="https://edwardzhong.github.io">
  <meta property="og:type" content="blog">
  <meta property="og:title" content="WebGLå­¦ä¹ (2) - 3Dåœºæ™¯ - Jeff's world">
  <meta property="og:description" content="it's a blog by hexo">
  
    
    
      <link rel="stylesheet" href="/lib/fontello/fontello.css">
    
      <link rel="stylesheet" href="/lib/reboto/roboto.css">
    
      <link rel="stylesheet" href="/css/index.css">
    
  
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?5255e97b442092b8e1a219e6a48a0d42";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Jeff's world" type="application/atom+xml">
</head>
<body>
<header class="header">
  <div class="top"></div>
  <h2>Jeff's World</h2>
  <h3>Things that I'm interested in</h3>
  <div class="menu">
  
  
  
      <a  href="/" title="ä¸» é¡µ">
        <i class="icon-home"></i>
        <span>ä¸» é¡µ</span>
      </a>
  
      <a  href="/sites/demo/" title="Demo">
        <i class="icon-page"></i>
        <span>Demo</span>
      </a>
  
      <a  data-tag="search"  href="javascript:;" title="æœ ç´¢">
        <i class="icon-search"></i>
        <span>æœ ç´¢</span>
      </a>
  
  </div>
  <div class="state">
  
    <a href="/archives">43<br>æ–‡ ç« </a><a href="/categories">2<br>åˆ† ç±»</a><a href="/tags">61<br>æ ‡ ç­¾</a>
  </div>
  <div class="social">
  
  
  
      <a href="https://github.com/edwardzhong" target="_blank" rel="noopener" title="Github"><i class="icon-github"></i></a>
  
      <a href="https://twitter.com/JianfengEdward" target="_blank" rel="noopener" title="Twitter"><i class="icon-twitter"></i></a>
  
      <a href="https://www.facebook.com/jianfeng.edward" target="_blank" rel="noopener" title="Facebook"><i class="icon-facebook"></i></a>
  
      <a href="http://weibo.com/1593251850" target="_blank" rel="noopener" title="Weibo"><i class="icon-weibo"></i></a>
  
      <a href="/atom.xml" title="Rss"><i class="icon-rss"></i></a>
  
  </div>
  <div id="payBtn" class="pay-icon" title="è°¢è°¢æ‚¨çš„èµèµ">èµ</div>
</header>
  <div class="container">
    <div class="main">
    
        
<div class="post-list">
	<article class="post" style="animation:listshow 0.6s ease-out both 0.30000000000000004s">
    
    
        
    
	
	<a href="javascript:;">
        <div class="post-banner" style="background: url(/images/banner2.jpg)  center top / 100% no-repeat">
    		<h3 class="post-title">WebGLå­¦ä¹ (2) - 3Dåœºæ™¯</h3>
    	</div>
	</a>
	<div class="post-inner">
	
    	<div class="post-info">
    		<time><i class="icon-calendar"></i> 2017/11/14 14:30:00</time>
    		<span class="category">
    		
    			
    			<i class="icon-book"></i>
    			
                    
                        <a href="/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a>
                    
    			
    		
    		</span>
    	</div>
    	<!-- <p><p>ç»è¿‡å‰é¢WebGLå­¦ä¹ (1) - ä¸‰è§’å½¢*çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†webGLçš„åŸºç¡€çŸ¥è¯†ï¼Œä¹Ÿå·²ç»èƒ½å¤Ÿç”»å‡ºæœ€åŸºæœ¬çš„å›¾å½¢ï¼Œæ¯”å¦‚ç‚¹ï¼Œçº¿ï¼Œä¸‰è§’å½¢ï¼ŒçŸ©å½¢ç­‰ã€‚æœ‰äº†2Dç»˜å›¾çš„åŸºç¡€ï¼Œç°åœ¨ç»ˆäºå¯ä»¥è¿›å…¥ç²¾å½©çš„3Dä¸–ç•Œäº†â€¦</p>
</p> -->
    	
    		<div class="post-content"><p>ç»è¿‡å‰é¢<em><a href="https://edwardzhong.github.io/2017/11/08/webgltriangle/">WebGLå­¦ä¹ (1) - ä¸‰è§’å½¢</a>*çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†webGLçš„åŸºç¡€çŸ¥è¯†ï¼Œä¹Ÿå·²ç»èƒ½å¤Ÿç”»å‡ºæœ€åŸºæœ¬çš„å›¾å½¢ï¼Œæ¯”å¦‚ç‚¹ï¼Œçº¿ï¼Œä¸‰è§’å½¢ï¼ŒçŸ©å½¢ç­‰ã€‚æœ‰äº†2Dç»˜å›¾çš„åŸºç¡€ï¼Œç°åœ¨ç»ˆäºå¯ä»¥è¿›å…¥ç²¾å½©çš„3Dä¸–ç•Œäº†ï¼Œæ¥çœ‹ä¸€ä¸‹è¿™ä¸€èŠ‚è¦å®ç°çš„3Dçš„æ•ˆæœå§ã€‚<br>å®é™…æ•ˆæœï¼š</em><a href="https://edwardzhong.github.io/sites/demo/dist/webgl2.html">webGL3Dåœºæ™¯</a>*</p>
<!-- ![it](http://oncse3u6r.bkt.clouddn.com/webgl3d1.gif) -->
<img src="http://upload-images.jianshu.io/upload_images/127924-f8ae7a07dececee8.gif" width="300">
<a id="more"></a>

<h2 id="webGLæ¸²æŸ“æµç¨‹"><a href="#webGLæ¸²æŸ“æµç¨‹" class="headerlink" title="webGLæ¸²æŸ“æµç¨‹"></a>webGLæ¸²æŸ“æµç¨‹</h2><p>é‡æ¸©ä¸€ä¸‹webGLçš„æ¸²æŸ“æµç¨‹ï¼Œè¿™ä¸€èŠ‚åœ¨ç¬¬3ã€4ã€5ã€6æ­¥éª¤éœ€è¦å­¦ä¹ æ–°çš„å†…å®¹ã€‚å…¶ä¸­å†™å…¥æ•°æ®äº¤å‰å­˜æ”¾ç¼“å†²åŒºï¼Œè®¾ç½®éšè—é¢æ¶ˆé™¤ï¼Œæ¸…ç©ºæ·±åº¦ç¼“å†²éƒ½æ˜¯æ¯”è¾ƒç®€å•çš„éƒ¨åˆ†ã€‚é‡ç‚¹å’Œéš¾ç‚¹æ˜¯åœ¨3Då˜æ¢çš„ç¯èŠ‚ï¼Œåœ¨ç†è§£äº†çŸ©é˜µçš„åŸç†åŸºç¡€ä¸Šï¼Œè¿™æ¬¡ä½¿ç”¨äº†ã€ŠWebGLç¼–ç¨‹æŒ‡å—ã€‹æä¾›çš„çŸ©é˜µæ“ä½œåº“ã€‚</p>
<ol>
<li>è·å–webGLç»˜å›¾ä¸Šä¸‹æ–‡</li>
<li>åˆå§‹åŒ–ç€è‰²å™¨</li>
<li>åˆ›å»ºã€ç»‘å®šç¼“å†²åŒºå¯¹è±¡</li>
<li>3Då˜æ¢</li>
<li>å‘é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨å†™å…¥æ•°æ®(æ•°æ®äº¤å‰å­˜æ”¾ç¼“å†²åŒº)</li>
<li>è®¾ç½®canvasèƒŒæ™¯è‰²ï¼Œè®¾ç½®éšè—é¢æ¶ˆé™¤</li>
<li>æ¸…ç©ºcanvas|æ¸…ç©ºæ·±åº¦ç¼“å†²</li>
<li>ç»˜åˆ¶</li>
</ol>
<h2 id="ç€è‰²å™¨"><a href="#ç€è‰²å™¨" class="headerlink" title="ç€è‰²å™¨"></a>ç€è‰²å™¨</h2><p>ç€è‰²å™¨ä»£ç ä¿®æ”¹ä¸ºä¸‹é¢ï¼Œæˆ‘ä»¬ç°åœ¨éœ€è¦ä¸ºæ¯ä¸ªé¡¶ç‚¹éƒ½ä½¿ç”¨ä¸åŒçš„é¢œè‰²ï¼Œæ‰€ä»¥ä½¿ç”¨åˆ°äº†varyingé™å®šç¬¦çš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡ç›®çš„å°±æ˜¯è¿æ¥é¡¶ç‚¹å’Œç‰‡å…ƒç€è‰²å™¨ï¼ŒæŠŠé¡¶ç‚¹ä¿¡æ¯å’Œé¢œè‰²ä¿¡æ¯ç»“åˆèµ·æ¥ã€‚çœ‹åˆ°é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨éƒ½æœ‰çš„v_colorå˜é‡äº†å—ï¼Ÿå…¶å®å°±æ˜¯é€šè¿‡å…¨å±€å˜é‡ä¼ é€’ã€‚<br><strong>é¡¶ç‚¹ç€è‰²å™¨</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script type=<span class="string">"x-shader/x-vertex"</span> id=<span class="string">"vs"</span>&gt;</span><br><span class="line">attribute vec4 a_Position; <span class="comment">//é¡¶ç‚¹</span></span><br><span class="line">uniform mat4 u_MvpMatrix;<span class="comment">//æ¨¡å‹è§†ç‚¹æŠ•å½±çŸ©é˜µ</span></span><br><span class="line">attribute vec4 a_Color;</span><br><span class="line">varying vec4 v_color;<span class="comment">// è¿æ¥ç‰‡å…ƒç€è‰²å™¨</span></span><br><span class="line"><span class="keyword">void</span> main() &#123; </span><br><span class="line">  	gl_Position = u_MvpMatrix * a_Position;</span><br><span class="line">  	v_color=a_Color;<span class="comment">//ä¼ é€’ç»™ç‰‡å…ƒç€è‰²å™¨å˜é‡</span></span><br><span class="line">&#125; </span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>ç‰‡å…ƒç€è‰²å™¨</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script type=<span class="string">"x-shader/x-fragment"</span> id=<span class="string">"fs"</span>&gt;</span><br><span class="line">precision mediump float; <span class="comment">// ç²¾åº¦é™å®š</span></span><br><span class="line">varying vec4 v_color; <span class="comment">//ä»é¡¶ç‚¹ç€è‰²å™¨æ¥æ”¶</span></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  	gl_FragColor = v_color;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3Dåæ ‡ç³»"><a href="#3Dåæ ‡ç³»" class="headerlink" title="3Dåæ ‡ç³»"></a>3Dåæ ‡ç³»</h2><p>ç¬¬1ã€2ã€3æ­¥éª¤å‰é¢æ–‡ç« å·²ç»ä»‹ç»ï¼Œç°åœ¨æˆ‘ä»¬ç›´æ¥è¿›å…¥3Dçš„ç¯èŠ‚ã€‚3Dæ¯”2Dä¸»è¦å°±æ˜¯å¤šäº†æ·±åº¦ä¿¡æ¯ï¼Œç”¨åæ ‡ç³»æ¥æè¿°å°±æ˜¯ï¼Œé™¤xyè½´å¤–ï¼Œè¿˜å¤šäº†zè½´ã€‚webGLçš„åæ ‡ç³»è·Ÿæˆ‘ä»¬webçš„åæ ‡ç³»æ˜¯ä¸ä¸€æ ·çš„ï¼Œé¦–å…ˆå®ƒåŸç‚¹ä¸æ˜¯åœ¨å·¦ä¸Šè§’è€Œæ˜¯ä½äºä¸­é—´ï¼Œxyzæ–¹å‘ä¹Ÿä¸åŒã€‚</p>
<!-- ![it](http://oncse3u6r.bkt.clouddn.com/coordinate.jpg) -->
<img src="http://upload-images.jianshu.io/upload_images/127924-609ae5719973e21e.jpg" width="300">

<h2 id="è§†ç‚¹å’Œè§†çº¿"><a href="#è§†ç‚¹å’Œè§†çº¿" class="headerlink" title="è§†ç‚¹å’Œè§†çº¿"></a>è§†ç‚¹å’Œè§†çº¿</h2><p>æ¥ç€å¼•å…¥ä¸€ä¸ªæ¦‚å¿µï¼Œ<strong>è§†ç‚¹</strong>ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰è§‚å¯Ÿè€…çš„ä½ç½®ï¼Œè§‚å¯Ÿè€…èƒ½çœ‹å¤šè¿œï¼Œè§‚å¯Ÿè€…çš„æ–¹å‘ï¼Œç›´æ¥çœ‹å›¾å§</p>
<!-- ![it](http://oncse3u6r.bkt.clouddn.com/viewpoint.jpg?t=1) -->
<img src="http://upload-images.jianshu.io/upload_images/127924-486e65d8a81e82d2.jpg" width="400">

<p>ä¸Šæ–¹å‘å°±æ˜¯è§‚æµ‹è€…ä»å“ªä¸ªæ–¹å‘çœ‹ï¼Œ(0,1,0)æ˜¯æ­£å¸¸çš„Yè½´æ­£æ–¹å‘ï¼Œ(1,0,0)å°±ç›¸å½“äºç‰©ä½“å‘å·¦æ—‹90åº¦ï¼Œç­‰äºæˆ‘ä»¬æŠŠå¤´æ‰“æ¨ªçœ‹ç‰©ä½“ã€‚é€šè¿‡å®šä¹‰è§†ç‚¹çŸ©é˜µï¼Œæˆ‘ä»¬çœ‹åˆ°çš„å›¾å½¢çš„å½¢çŠ¶ä¼šäº§ç”Ÿå˜åŒ–çš„ï¼Œå°±å’Œæˆ‘ä»¬å®é™…ç¯å¢ƒä¸åŒçš„è§’åº¦ä½ç½®è§‚å¯ŸåŒä¸€ç‰©ä½“æ˜¯ä¸€æ ·ä¸€æ ·çš„ã€‚æˆ‘ä»¬è°ƒç”¨çŸ©é˜µåº“ä¸­çš„æ–¹æ³•ï¼Œä¼šäº§ç”Ÿå‡ºä¸€ä¸ª4X4çš„çŸ©é˜µï¼Œå…·ä½“ä¸­é—´çš„äº§ç”Ÿè¿‡ç¨‹ï¼Œå¯ä»¥çœ‹æºä»£ç ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// (è§†ç‚¹ï¼Œè§‚å¯Ÿç›®æ ‡ç‚¹ï¼Œä¸Šæ–¹å‘)</span></span><br><span class="line">setLookAt(eyeX, eyeY, eyeZ, centerX, centerY, centerZ, upX, upY, upZ)</span><br></pre></td></tr></table></figure>

<h2 id="æŠ•å½±å¯è§†ç©ºé—´"><a href="#æŠ•å½±å¯è§†ç©ºé—´" class="headerlink" title="æŠ•å½±å¯è§†ç©ºé—´"></a>æŠ•å½±å¯è§†ç©ºé—´</h2><p>åªæœ‰æŒ‡å®šäº†å¯è§†ç©ºé—´ï¼ŒwebGLæ‰ä¼šå»ç»˜åˆ¶å›¾å½¢ï¼Œæœ‰ä¸¤ç§ç±»å‹ï¼š<br>ä¸€æ˜¯ç›’çŠ¶å¯è§†ç©ºé—´ï¼Œç”±<strong>æ­£å°„æŠ•å½±</strong>äº§ç”Ÿï¼Œå®ƒäº§ç”Ÿçš„å›¾å½¢ï¼Œå‰åç‰©ä½“æ²¡æœ‰å¤§å°åŒºåˆ«ï¼Œéƒ½æ˜¯ä¸€æ ·é«˜å®½ã€‚</p>
<!-- ![it](http://oncse3u6r.bkt.clouddn.com/ortho.jpg) -->
<img src="http://upload-images.jianshu.io/upload_images/127924-64dd0f68a919f159.jpg" width="400"> 
è°ƒç”¨çŸ©é˜µåº“çš„setOrthoæ–¹æ³•ï¼Œäº§ç”ŸçŸ©é˜µ

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ­£è§†æŠ•å½± (left,right,bottom,top,near,far), ç»„æˆä¸€ä¸ªæ­£æ–¹ä½“çš„å¯è§†ç©ºé—´ </span></span><br><span class="line">setOrtho(left, right, bottom, top, near, far);</span><br></pre></td></tr></table></figure>

<p>äºŒæ˜¯å››æ£±é”¥å¯è§†ç©ºé—´ï¼Œç”±<strong>é€è§†æŠ•å½±</strong>äº§ç”Ÿï¼Œé€è§†æŠ•å½±äº§ç”Ÿçš„3Dåœºæ™¯æ›´åŠ çœŸå®è‡ªç„¶ï¼Œå®ƒäº§ç”Ÿçš„å›¾å½¢å…·æœ‰è¿‘å¤§è¿œå°çš„é€è§†æ•ˆæœï¼Œå½“ç„¶æ€§èƒ½æ¶ˆè€—ç›¸å¯¹æ­£å°„æŠ•å½±é«˜ä¸€äº›ã€‚</p>
<!-- ![it](http://oncse3u6r.bkt.clouddn.com/perspective.jpg) -->
<img src="http://upload-images.jianshu.io/upload_images/127924-a39c556a0a9e7e5d.jpg" width="400">
è°ƒç”¨setPerspectiveæ–¹æ³•ï¼ŒåŒç†ç”ŸæˆçŸ©é˜µ

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŠ•å½±çŸ©é˜µ(fovå¯è§†ç©ºé—´åº•é¢å’Œé¡¶é¢å¤¹è§’&lt;å¤§äº0&gt;,è¿‘è£æˆªé¢å®½é«˜æ¯”,è¿‘è£æˆªé¢ä½ç½®&lt;å¤§äº0&gt;,è¿œè£æˆªé¢ä½ç½®&lt;å¤§äº0&gt; )</span></span><br><span class="line">setPerspective(fovy, aspect, near, far)</span><br></pre></td></tr></table></figure>

<h2 id="æ•°æ®äº¤å‰å­˜æ”¾ç¼“å†²åŒº"><a href="#æ•°æ®äº¤å‰å­˜æ”¾ç¼“å†²åŒº" class="headerlink" title="æ•°æ®äº¤å‰å­˜æ”¾ç¼“å†²åŒº"></a>æ•°æ®äº¤å‰å­˜æ”¾ç¼“å†²åŒº</h2><p>æˆ‘ä»¬æ—¢å¯ä»¥ç»™ä¸åŒçš„ä¿¡æ¯åˆ†åˆ«åˆ›å»ºå•ç‹¬ç¼“å†²åŒºï¼Œä¹Ÿå¯ä»¥ç»™ä¸åŒçš„ä¿¡æ¯åˆ›å»ºåŒä¸€å—åˆç”¨çš„ç¼“å†²åŒºï¼Œå‰è€…é€‚åˆæ•°æ®é‡å°çš„æƒ…å†µï¼Œæˆ‘ä»¬ç°åœ¨å®ç°ç¬¬äºŒç§æƒ…å†µï¼šç»™ä¸åŒçš„ä¿¡æ¯åˆ›å»ºä¸€å—ç¼“å†²åŒºï¼Œå¹¶äº¤å‰å­˜æ”¾ã€‚é¦–å…ˆç”¨ä¸€ä¸ªæ•°ç»„åŒæ—¶å­˜æ”¾é¡¶ç‚¹ä¿¡æ¯å’Œé¡¶ç‚¹å¯¹åº”çš„é¢œè‰²ä¿¡æ¯ï¼Œæ¥ç€åˆ›å»ºç¼“å†²åŒºåè°ƒç”¨gl.vertexAttribPointer()ï¼Œè¯¥æ–¹æ³•æœ‰å®šä¹‰æ¯ä¸ªåˆ†é‡çš„ä¸ªæ•°ï¼Œæ¯ä¸€è¡Œçš„ä¸ªæ•°ä»¥åŠåç§»æ•°ï¼Œå½“ç„¶ç›¸é‚»é¡¶ç‚¹æ•°å’Œåç§»é‡è¦ä¹˜ä»¥å•ä½å­—èŠ‚ï¼Œå…·ä½“çœ‹ä»£ç çš„æ³¨é‡Šã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ··åˆç¼“å†²åŒº(åŒ…æ‹¬é¡¶ç‚¹ï¼Œé¢œè‰²)ï¼Œæ¯ä¸€è¡Œå‰3ä¸ªæ˜¯é¡¶ç‚¹ä¿¡æ¯ï¼Œå3ä¸ªæ˜¯é¢œè‰²ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> verticeColors=<span class="keyword">new</span> <span class="built_in">Float32Array</span>([</span><br><span class="line">  <span class="number">0.0</span>,  <span class="number">1.0</span>,  <span class="number">-2.0</span>,  <span class="number">0.3</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>, </span><br><span class="line">  <span class="number">-0.5</span>, <span class="number">-1.0</span>,  <span class="number">-2.0</span>,  <span class="number">0.3</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,</span><br><span class="line">  <span class="number">0.5</span>, <span class="number">-1.0</span>,  <span class="number">-2.0</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,  <span class="number">0.4</span>, </span><br><span class="line"></span><br><span class="line">  <span class="number">0.0</span>,  <span class="number">1.0</span>,  <span class="number">-1.0</span>,  <span class="number">1.0</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>, </span><br><span class="line">  <span class="number">-0.5</span>, <span class="number">-1.0</span>,  <span class="number">-1.0</span>,  <span class="number">1.0</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,</span><br><span class="line">  <span class="number">0.5</span>, <span class="number">-1.0</span>,  <span class="number">-1.0</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,  <span class="number">0.4</span>, </span><br><span class="line"></span><br><span class="line">  <span class="number">0.0</span>,  <span class="number">1.0</span>,   <span class="number">0.0</span>,  <span class="number">0.4</span>,  <span class="number">0.4</span>,  <span class="number">1.0</span>, </span><br><span class="line">  <span class="number">-0.5</span>, <span class="number">-1.0</span>,   <span class="number">0.0</span>,  <span class="number">0.4</span>,  <span class="number">0.4</span>,  <span class="number">1.0</span>,</span><br><span class="line">  <span class="number">0.5</span>, <span class="number">-1.0</span>,   <span class="number">0.0</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,  <span class="number">0.4</span>, </span><br><span class="line">]);</span><br><span class="line"><span class="comment">// åˆ›å»ºç¼“å†²åŒº</span></span><br><span class="line"><span class="keyword">if</span>(!createBuffer(verticeColors))&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Failed to create the buffer object'</span>);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯ä¸ªå…ƒç´ çš„å­—èŠ‚</span></span><br><span class="line"><span class="keyword">var</span> FSIZE = verticeColors.BYTES_PER_ELEMENT;</span><br><span class="line"><span class="comment">// è·å–é¡¶ç‚¹ä½ç½®</span></span><br><span class="line"><span class="keyword">var</span> a_Position = gl.getAttribLocation(gl.program, <span class="string">'a_Position'</span>);</span><br><span class="line"><span class="comment">// (åœ°å€,æ¯ä¸ªé¡¶ç‚¹åˆ†é‡çš„ä¸ªæ•°&lt;1-4&gt;,æ•°æ®ç±»å‹&lt;æ•´å½¢ï¼Œç¬¦ç‚¹ç­‰&gt;,æ˜¯å¦å½’ä¸€åŒ–,æŒ‡å®šç›¸é‚»ä¸¤ä¸ªé¡¶ç‚¹é—´å­—èŠ‚æ•°&lt;é»˜è®¤0&gt;,æŒ‡å®šç¼“å†²åŒºå¯¹è±¡åç§»å­—èŠ‚æ•°é‡&lt;é»˜è®¤0&gt;)</span></span><br><span class="line">gl.vertexAttribPointer(a_Position, <span class="number">3</span>, gl.FLOAT, <span class="literal">false</span>, <span class="number">6</span>*FSIZE, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// Enable the assignment to a_Position variable</span></span><br><span class="line">gl.enableVertexAttribArray(a_Position);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–a_Colorå˜é‡çš„å­˜å‚¨åœ°å€å¹¶èµ‹å€¼</span></span><br><span class="line"><span class="keyword">var</span> a_Color = gl.getAttribLocation(gl.program, <span class="string">'a_Color'</span>);</span><br><span class="line">gl.vertexAttribPointer(a_Color, <span class="number">3</span>, gl.FLOAT, <span class="literal">false</span>, <span class="number">6</span>*FSIZE, <span class="number">2</span>*FSIZE);</span><br><span class="line">gl.enableVertexAttribArray(a_Color);</span><br></pre></td></tr></table></figure>
<h2 id="3Dç›¸å…³çš„å…¶ä»–è®¾ç½®"><a href="#3Dç›¸å…³çš„å…¶ä»–è®¾ç½®" class="headerlink" title="3Dç›¸å…³çš„å…¶ä»–è®¾ç½®"></a>3Dç›¸å…³çš„å…¶ä»–è®¾ç½®</h2><p>å¼€å¯éšè—é¢æ¶ˆé™¤å¯ä»¥å‡å°‘æ¸²æŸ“é‡ï¼Œæé«˜æ€§èƒ½ï¼ŒåŒæ—¶è¿˜å¯ä»¥é¿å…é¡ºåºä¸ä¸€è‡´æ—¶ï¼Œåé¢çš„å›¾å½¢ç›–ä½å‰é¢çš„å›¾å½¢ã€‚è€Œå¤šè¾¹å½¢åç§»ï¼Œå¯ä»¥é¿å…æ·±åº¦å¾ˆæ¥è¿‘çš„ä¸¤ä¸ªå›¾å½¢äº§ç”Ÿå†²çªã€‚å½“ç„¶æ¯æ¬¡é‡æ–°æ¸²æŸ“çš„æ—¶å€™ï¼Œåœ¨æ¸…å±çš„åŒæ—¶æ¸…é™¤æ·±åº¦ç¼“å†²ï¼Œå…·ä½“å®ç°è¯·çœ‹ä»£ç ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼€å¯éšè—é¢æ¶ˆé™¤</span></span><br><span class="line">gl.enable(gl.DEPTH_TEST);</span><br><span class="line"><span class="comment">//æ¸…å±|æ¸…æ·±åº¦ç¼“å†²</span></span><br><span class="line">gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);</span><br><span class="line"><span class="comment">// å¯ç”¨å¤šè¾¹å½¢åç§»ï¼Œé¿å…æ·±åº¦å†²çª</span></span><br><span class="line">gl.enable(gl.POLYGON_OFFSET_FILL);</span><br><span class="line"><span class="comment">//è®¾ç½®åç§»é‡</span></span><br><span class="line">gl.polygonOffset(<span class="number">1.0</span>, <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure>
<h2 id="æ‰§è¡ŒåŠ¨ç”»"><a href="#æ‰§è¡ŒåŠ¨ç”»" class="headerlink" title="æ‰§è¡ŒåŠ¨ç”»"></a>æ‰§è¡ŒåŠ¨ç”»</h2><p>æ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬æ‰§è¡ŒåŠ¨ç”»çš„éƒ¨åˆ†ï¼Œé¦–å…ˆè®¾ç½®å¥½ç”¨äºä½ç§»æ—‹è½¬çš„æ¨¡å‹çŸ©é˜µï¼Œç„¶åä¾æ¬¡äº§ç”Ÿè§†ç‚¹çŸ©é˜µï¼ŒæŠ•å½±çŸ©é˜µï¼Œæ¥ç€æŠŠå®ƒä»¬ç›¸ä¹˜äº§ç”Ÿå‡ºmvpçŸ©é˜µï¼Œç„¶åä¼ å…¥å˜é‡ï¼Œæœ€åç»˜å›¾ã€‚åœ¨ç»˜åˆ¶å®Œç¬¬ä¸€ç»„å›¾å½¢çš„æ—¶å€™ï¼Œå°†å‰é¢çš„mvpçŸ©é˜µå†å·¦ç§»2ä¸ªå•ä½ï¼Œå†ç»˜åˆ¶ä¸€éï¼Œäºæ˜¯å°±äº§ç”Ÿå‡ºäº†ç¬¬äºŒç»„å›¾å½¢ã€‚å…·ä½“çš„é€»è¾‘æƒ…å†µä»£ç æ³¨é‡Šã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> angle=<span class="number">0</span>;</span><br><span class="line"><span class="comment">// æ‰§è¡ŒåŠ¨ç”»</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="comment">// æ—‹è½¬ä½ç§» ç­‰äºç»•åŸç‚¹Yæ—‹è½¬</span></span><br><span class="line">		modelMatrix.setRotate((angle++)%<span class="number">360</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">		modelMatrix.translate(<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">		<span class="comment">// (è§†ç‚¹ï¼Œè§‚å¯Ÿç›®æ ‡ç‚¹ï¼Œä¸Šæ–¹å‘)</span></span><br><span class="line">		viewMatrix.setLookAt(<span class="number">-0.25</span>, <span class="number">-0.25</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-100</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">		<span class="comment">// æŠ•å½±çŸ©é˜µ(fovå¯è§†ç©ºé—´åº•é¢å’Œé¡¶é¢å¤¹è§’&lt;å¤§äº0&gt;,è¿‘è£æˆªé¢å®½é«˜æ¯”,è¿‘è£æˆªé¢ä½ç½®&lt;å¤§äº0&gt;,è¿œè£æˆªé¢ä½ç½®&lt;å¤§äº0&gt; )</span></span><br><span class="line">		projMatrix.setPerspective(<span class="number">30</span>, canvas.width/canvas.height, <span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line">		<span class="comment">// çŸ©é˜µç›¸ä¹˜</span></span><br><span class="line">		mvpMatrix.set(projMatrix).multiply(viewMatrix).multiply(modelMatrix);</span><br><span class="line">		<span class="comment">// èµ‹å€¼</span></span><br><span class="line">		gl.uniformMatrix4fv(u_MvpMatrix, <span class="literal">false</span>, mvpMatrix.elements);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//æ¸…å±|æ¸…æ·±åº¦ç¼“å†²</span></span><br><span class="line">		gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);</span><br><span class="line">		<span class="comment">// å¯ç”¨å¤šè¾¹å½¢åç§»ï¼Œé¿å…æ·±åº¦å†²çª</span></span><br><span class="line">		gl.enable(gl.POLYGON_OFFSET_FILL);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// (åŸºæœ¬å›¾å½¢ï¼Œç¬¬å‡ ä¸ªé¡¶ç‚¹ï¼Œæ‰§è¡Œå‡ æ¬¡)ï¼Œä¿®æ”¹åŸºæœ¬å›¾å½¢é¡¹å¯ä»¥ç”Ÿæˆç‚¹ï¼Œçº¿ï¼Œä¸‰è§’å½¢ï¼ŒçŸ©å½¢ï¼Œæ‰‡å½¢ç­‰</span></span><br><span class="line">		gl.drawArrays(gl.TRIANGLES, <span class="number">0</span>, <span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//ä½ç§»åï¼Œå†å°†å‰é¢3ä¸ªä¸‰è§’å½¢é‡æ–°ç»˜åˆ¶</span></span><br><span class="line">		modelMatrix.translate(<span class="number">-2</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">		mvpMatrix.set(projMatrix).multiply(viewMatrix).multiply(modelMatrix);</span><br><span class="line">		gl.uniformMatrix4fv(u_MvpMatrix, <span class="literal">false</span>, mvpMatrix.elements);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//è®¾ç½®åç§»é‡</span></span><br><span class="line">		gl.polygonOffset(<span class="number">1.0</span>, <span class="number">1.0</span>);</span><br><span class="line">		gl.drawArrays(gl.TRIANGLES, <span class="number">0</span>, <span class="number">9</span>); </span><br><span class="line"></span><br><span class="line">		requestAnimationFrame(animate);</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å­¦ä¹ å®Œ3Dåœºæ™¯åï¼Œæˆ‘ä»¬åˆå†ä¸€æ¬¡é¢†ç•¥åˆ°äº†çº¿æ€§ä»£æ•°ä¸­çŸ©é˜µåœ¨å›¾å½¢å­¦ä¸­çš„é‡è¦ä½œç”¨ã€‚3Dçš„çŸ©é˜µè½¬æ¢æ‰æ˜¯éœ€è¦ç©ºé—´æ€ç»´å’Œæ·±å…¥ç†è§£çš„éƒ¨åˆ†ï¼Œå…¶ä»–åœ°æ–¹è¯´å®è¯å°±æ˜¯å­¦ä¹ å¦‚ä½•è°ƒç”¨apiã€‚<br>æœ€åï¼ŒçŒ®ä¸Šä¸»ä½“çš„å…¨éƒ¨ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span>	canvas=<span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>),</span><br><span class="line">    gl=get3DContext(canvas,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!gl) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Failed to get the rendering context for WebGL'</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!createShaders(gl, <span class="string">'fs'</span>, <span class="string">'vs'</span>)) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Failed to intialize shaders.'</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * æ··åˆç¼“å†²åŒº(åŒ…æ‹¬é¡¶ç‚¹ï¼Œé¢œè‰²)</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">    <span class="keyword">var</span> verticeColors=<span class="keyword">new</span> <span class="built_in">Float32Array</span>([</span><br><span class="line">      <span class="number">0.0</span>,  <span class="number">1.0</span>,  <span class="number">-2.0</span>,  <span class="number">0.3</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,</span><br><span class="line">      <span class="number">-0.5</span>, <span class="number">-1.0</span>,  <span class="number">-2.0</span>,  <span class="number">0.3</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,</span><br><span class="line">      <span class="number">0.5</span>, <span class="number">-1.0</span>,  <span class="number">-2.0</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,  <span class="number">0.4</span>, </span><br><span class="line"></span><br><span class="line">      <span class="number">0.0</span>,  <span class="number">1.0</span>,  <span class="number">-1.0</span>,  <span class="number">1.0</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,</span><br><span class="line">      <span class="number">-0.5</span>, <span class="number">-1.0</span>,  <span class="number">-1.0</span>,  <span class="number">1.0</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,</span><br><span class="line">      <span class="number">0.5</span>, <span class="number">-1.0</span>,  <span class="number">-1.0</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,  <span class="number">0.4</span>, </span><br><span class="line"></span><br><span class="line">      <span class="number">0.0</span>,  <span class="number">1.0</span>,   <span class="number">0.0</span>,  <span class="number">0.4</span>,  <span class="number">0.4</span>,  <span class="number">1.0</span>,</span><br><span class="line">      <span class="number">-0.5</span>, <span class="number">-1.0</span>,   <span class="number">0.0</span>,  <span class="number">0.4</span>,  <span class="number">0.4</span>,  <span class="number">1.0</span>,</span><br><span class="line">      <span class="number">0.5</span>, <span class="number">-1.0</span>,   <span class="number">0.0</span>,  <span class="number">1.0</span>,  <span class="number">0.4</span>,  <span class="number">0.4</span>, </span><br><span class="line">    ]);</span><br><span class="line">    <span class="comment">// åˆ›å»ºç¼“å†²åŒº</span></span><br><span class="line">    <span class="keyword">if</span>(!createBuffer(verticeColors))&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Failed to create the buffer object'</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯ä¸ªå…ƒç´ çš„å­—èŠ‚</span></span><br><span class="line">    <span class="keyword">var</span> FSIZE = verticeColors.BYTES_PER_ELEMENT;</span><br><span class="line">    <span class="comment">// è·å–é¡¶ç‚¹ä½ç½®</span></span><br><span class="line">    <span class="keyword">var</span> a_Position = gl.getAttribLocation(gl.program, <span class="string">'a_Position'</span>);</span><br><span class="line">    <span class="comment">// (åœ°å€,æ¯ä¸ªé¡¶ç‚¹åˆ†é‡çš„ä¸ªæ•°&lt;1-4&gt;,æ•°æ®ç±»å‹&lt;æ•´å½¢ï¼Œç¬¦ç‚¹ç­‰&gt;,æ˜¯å¦å½’ä¸€åŒ–,æŒ‡å®šç›¸é‚»ä¸¤ä¸ªé¡¶ç‚¹é—´å­—èŠ‚æ•°&lt;é»˜è®¤0&gt;,æŒ‡å®šç¼“å†²åŒºå¯¹è±¡åç§»å­—èŠ‚æ•°é‡&lt;é»˜è®¤0&gt;)</span></span><br><span class="line">    gl.vertexAttribPointer(a_Position, <span class="number">3</span>, gl.FLOAT, <span class="literal">false</span>, <span class="number">6</span>*FSIZE, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// Enable the assignment to a_Position variable</span></span><br><span class="line">    gl.enableVertexAttribArray(a_Position);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–a_Colorå˜é‡çš„å­˜å‚¨åœ°å€å¹¶èµ‹å€¼</span></span><br><span class="line">    <span class="keyword">var</span> a_Color = gl.getAttribLocation(gl.program, <span class="string">'a_Color'</span>);</span><br><span class="line">    gl.vertexAttribPointer(a_Color, <span class="number">3</span>, gl.FLOAT, <span class="literal">false</span>, <span class="number">6</span>*FSIZE, <span class="number">2</span>*FSIZE);</span><br><span class="line">    gl.enableVertexAttribArray(a_Color);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> u_MvpMatrix = gl.getUniformLocation(gl.program, <span class="string">'u_MvpMatrix'</span>);</span><br><span class="line">    <span class="keyword">if</span>(!u_MvpMatrix) &#123; </span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Failed to get the storage location of u_MvpMatrix'</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¾ç½®èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">    gl.clearColor(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>);</span><br><span class="line">    <span class="comment">// å¼€å¯éšè—é¢æ¶ˆé™¤</span></span><br><span class="line">    gl.enable(gl.DEPTH_TEST);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> modelMatrix = <span class="keyword">new</span> Matrix4(); <span class="comment">// æ¨¡å‹çŸ©é˜µ</span></span><br><span class="line">    <span class="keyword">var</span> viewMatrix = <span class="keyword">new</span> Matrix4();  <span class="comment">// è§†ç‚¹çŸ©é˜µ</span></span><br><span class="line">    <span class="keyword">var</span> projMatrix = <span class="keyword">new</span> Matrix4();  <span class="comment">// æŠ•å½±çŸ©é˜µ</span></span><br><span class="line">    <span class="keyword">var</span> mvpMatrix = <span class="keyword">new</span> Matrix4();   <span class="comment">// ç”¨äºç›¸ä¹˜ç”¨</span></span><br><span class="line">    <span class="keyword">var</span> angle=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">// æ‰§è¡ŒåŠ¨ç”»</span></span><br><span class="line">    (<span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="comment">// æ—‹è½¬ä½ç§» ç­‰äºç»•åŸç‚¹Yæ—‹è½¬</span></span><br><span class="line">      modelMatrix.setRotate((angle++)%<span class="number">360</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">      modelMatrix.translate(<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">      <span class="comment">// (è§†ç‚¹ï¼Œè§‚å¯Ÿç›®æ ‡ç‚¹ï¼Œä¸Šæ–¹å‘)</span></span><br><span class="line">      viewMatrix.setLookAt(<span class="number">-0.25</span>, <span class="number">-0.25</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-100</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">      <span class="comment">// æŠ•å½±çŸ©é˜µ(fovå¯è§†ç©ºé—´åº•é¢å’Œé¡¶é¢å¤¹è§’&lt;å¤§äº0&gt;,è¿‘è£æˆªé¢å®½é«˜æ¯”,è¿‘è£æˆªé¢ä½ç½®&lt;å¤§äº0&gt;,è¿œè£æˆªé¢ä½ç½®&lt;å¤§äº0&gt; )</span></span><br><span class="line">      projMatrix.setPerspective(<span class="number">30</span>, canvas.width/canvas.height, <span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line">      <span class="comment">// çŸ©é˜µç›¸ä¹˜</span></span><br><span class="line">      mvpMatrix.set(projMatrix).multiply(viewMatrix).multiply(modelMatrix);</span><br><span class="line">      <span class="comment">// èµ‹å€¼</span></span><br><span class="line">      gl.uniformMatrix4fv(u_MvpMatrix, <span class="literal">false</span>, mvpMatrix.elements);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//æ¸…å±|æ¸…æ·±åº¦ç¼“å†²</span></span><br><span class="line">      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);</span><br><span class="line">      <span class="comment">// å¯ç”¨å¤šè¾¹å½¢åç§»ï¼Œé¿å…æ·±åº¦å†²çª</span></span><br><span class="line">      gl.enable(gl.POLYGON_OFFSET_FILL);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// (åŸºæœ¬å›¾å½¢ï¼Œç¬¬å‡ ä¸ªé¡¶ç‚¹ï¼Œæ‰§è¡Œå‡ æ¬¡)ï¼Œä¿®æ”¹åŸºæœ¬å›¾å½¢é¡¹å¯ä»¥ç”Ÿæˆç‚¹ï¼Œçº¿ï¼Œä¸‰è§’å½¢ï¼ŒçŸ©å½¢ï¼Œæ‰‡å½¢ç­‰</span></span><br><span class="line">      gl.drawArrays(gl.TRIANGLES, <span class="number">0</span>, <span class="number">9</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="comment">//ä½ç§»åï¼Œå†å°†å‰é¢3ä¸ªä¸‰è§’å½¢é‡æ–°ç»˜åˆ¶</span></span><br><span class="line">      modelMatrix.translate(<span class="number">-2</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">      mvpMatrix.set(projMatrix).multiply(viewMatrix).multiply(modelMatrix);</span><br><span class="line">      gl.uniformMatrix4fv(u_MvpMatrix, <span class="literal">false</span>, mvpMatrix.elements);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//è®¾ç½®åç§»é‡</span></span><br><span class="line">      gl.polygonOffset(<span class="number">1.0</span>, <span class="number">1.0</span>);</span><br><span class="line">      gl.drawArrays(gl.TRIANGLES, <span class="number">0</span>, <span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">      requestAnimationFrame(animate);</span><br><span class="line">    &#125;());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main();</span><br></pre></td></tr></table></figure>

</div>
    	
		<div class="post-footer">
			<div class="tags">
				<i class="icon-tags"></i> 
				
					
					
						
							<a href="/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
						
					
						
							<a href="/tags/js/">js</a>
						
					
						
							<a href="/tags/webGL/">webGL</a>
						
					
				
			</div>
			<a class="share" href="javascript:;" data-url="/2017/11/14/webgl3d/" data-desc="ç»è¿‡å‰é¢WebGLå­¦ä¹ (1) - ä¸‰è§’å½¢*çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†webGLçš„åŸºç¡€çŸ¥è¯†ï¼Œä¹Ÿå·²ç»èƒ½..." data-type="share" title="share"><i class="icon-share"></i></a>
		</div>
	</div>
</article>
</div>
<nav class="pagination clearfix">
  
    
      
        <a href="/2017/11/21/chartline/" class="prev post-prev"> <i class="icon-leftarrow"></i> canvaså›¾è¡¨(2) - æŠ˜çº¿å›¾</a>
      

      
        <a href="/2017/11/12/chartbar/" class="next post-next"> canvaså›¾è¡¨(1) - æŸ±çŠ¶å›¾ <i class="icon-rightarrow"></i></a>
      
    
  
</nav>

<div class="wxshare-popup">
    <a class="close" href="javascript:;"></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <div id="qrcode" class="wx-qrcode"></div>
</div>

    
    <footer class="footer">
<p class="theme">
	Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/edwardzhong/simply.git" target="_blank" rel="noopener">simply</a>
</p>
<p class="copy">Copyright &copy; 2020 Jeff Zhong</p>
</footer>
    <div class="top-bottom">
      <div class="to-top hide" title="to top"><i class="icon-up"></i></div>
      <div class="to-bottom hide" title="to bottom"><i class="icon-down"></i></div>
    </div>
    </div>

  </div>
<input type="hidden" name="isPost" id="isPost" value="true">
<i id="barBtn" class="icon icon-menu"></i>
<div id="payMe" class="payme">
    <i class="icon icon-cancel"></i>
    <p class="pay-title">ç»™æˆ‘çš„æ—©é¤åŠ ä¸ªè›‹å§ ğŸ˜Š</p>
    <div>
      <img src="/images/weixinpay.jpg" alt="weixinpay">
      <img src="/images/alipay.jpg" alt="alipay" style="display:none;">
    </div>
    <div class="pay-selects">
        <input type="radio" name="pay" id="weixinpay" checked="checked"><label for="weixinpay"> å¾®ä¿¡ </label>&nbsp;&nbsp;
        <input type="radio" name="pay" id="alipay"><label for="alipay"> æ”¯ä»˜å® </label>
    </div>
</div>

  
  
    <script src="/lib/jquery-2.2.3.min.js"></script>
  
    <script src="/lib/qrcode.min.js"></script>
  
    <script src="/js/index.js"></script>
  

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</body>
</html>
