<!doctype html>
<html lang="zh-CN">










<head><meta name="generator" content="Hexo 3.8.0">
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <!-- 优先使用 IE 最新版本和 Chrome -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <!-- 为移动设备添加 viewport -->
  <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <!-- 添加到主屏后的标题（iOS 6 新增） -->
  <meta name="apple-mobile-web-app-title" content="前端快速开发模版 - Jeff's world">
  <!-- 是否启用 WebApp 全屏模式，删除苹果默认的工具栏和菜单栏 -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <!-- 设置苹果工具栏颜色 -->
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <!-- 添加智能 App 广告条 Smart App Banner（iOS 6+ Safari） -->
  <!-- <meta name = "apple-itunes-app" content = "app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL"> -->
  <!-- 忽略页面中的数字识别为电话，忽略email识别 -->
  <meta name="format-detection" content="telphone=no, email=no">
  <!--下面三个是清除缓存 微信浏览器缓存严重又无刷新；这个方法调试的时候很方便-->
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta http-equiv="Expires" content="0">
  
  <link rel="dns-prefetch" href="http://jeffzhong.space">
  <link rel="icon shortcut" type="image/ico" href="/favicon.ico">
  <meta name="author" content="Jeff Zhong">
  <meta name="description" content="it's a blog by hexo">
  <meta name="keywords" content="hexo theme">
  <title>前端快速开发模版 - Jeff's world</title>
    <!-- The Open Graph protocol -->
  <meta property="og:url" content="http://jeffzhong.space">
  <meta property="og:type" content="blog">
  <meta property="og:title" content="前端快速开发模版 - Jeff's world">
  <meta property="og:description" content="it's a blog by hexo">
  <!-- UC Browser Compatible -->
<!--   <script>
      var agent = navigator.userAgent.toLowerCase();
      if(agent.indexOf('ucbrowser')>0) {
          alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
      }
  </script> -->
  
    
    
      <link rel="stylesheet" href="/lib/fontello/fontello.css?t=1">
    
      <link rel="stylesheet" href="/lib/reboto/roboto.css?t=1">
    
      <link rel="stylesheet" href="/dist/css/index.css?t=1">
    
  
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?5255e97b442092b8e1a219e6a48a0d42";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>
<header class="header">
  <div class="top"></div>
  <h2>Jeff's World</h2>
  <h3>Things that I'm interested in</h3>
  <div class="menu">
  
  
  
      <a href="/">
        <i class="icon icon-home"></i>
        主页
      </a>
  
      <a href="http://jeffzhong.space/sites/demo/">
        <i class="icon icon-tag"></i>
        Demo
      </a>
  
      <a data-tag="search" href="javascript:;">
        <i class="icon icon-search"></i>
        搜索
      </a>
  
  </div>
  <div class="state">
  
    <a href="/archives">38<br>文章</a><a href="/categories">2<br>分类</a><a href="/tags">58<br>标签</a>
  </div>
  <div class="social">
  
  
  
      <a href="https://github.com/edwardzhong" title="Github"><i class="icon icon-github-circled"></i></a>
  
      <a href="https://twitter.com/JianfengEdward" title="Twitter"><i class="icon icon-twitter"></i></a>
  
      <a href="https://www.facebook.com/jianfeng.edward" title="Facebook"><i class="icon icon-facebook"></i></a>
  
      <a href="http://weibo.com/1593251850" title="Weibo"><i class="icon icon-weibo"></i></a>
  
      <a href="/atom.xml" title="Rss"><i class="icon icon-rss"></i></a>
  
  </div>
  <div id="payBtn" class="pay-icon" title="谢谢您的赞赏">赏</div>
</header>
  <div class="container">
    <div class="main">
    
        
<div class="post-list">
	<article class="post" style="animation:listshow 0.6s ease-out both 0.30000000000000004s">
    
    
        
    
	
	<a href="javascript:;">
        <div class="post-banner" style="background: url(https://upload-images.jianshu.io/upload_images/127924-1bcbb19d24c33d03.jpg)  center top / 100% no-repeat">
    		<h3 class="post-title">前端快速开发模版</h3>
    	</div>
	</a>
	<div class="post-inner">
	
    	<div class="post-info">
    		<time class="icon icon-calendar"> 2017/11/27 19:50:00</time>
    		<span class="category">
    		
    			
    			<i class="icon icon-book"></i>
    			
                    
                        <a href="/categories/技术/">技术</a>
                    
        			
    			
    		
    		</span>
    	</div>
    	<!-- <p><p>&emsp;&emsp;之前一直在开发移动端的单页面应用，而移动web对性能和效果要求是比较苛刻的，所以用的都是轻量级的框架体系。基本上是Zepto加自己开发的单页面框架，再加上若干简单的库。…</p>
</p> -->
    	
    	<div class="post-content"><!-- &emsp;&emsp;原文地址：[前端快速开发模版](https://edwardzhong.github.io/2017/11/27/projecttemplate/) -->
<p>&emsp;&emsp;之前一直在开发移动端的单页面应用，而移动web对性能和效果要求是比较苛刻的，所以用的都是轻量级的框架体系。基本上是Zepto加自己开发的单页面框架，再加上若干简单的库。这样前端要加载的文件很小，修改起来也非常方便，同时这样的轻量级的体系使用gulp进行自动化管理也是非常合适的。</p>
<p>&emsp;&emsp;自从开发react项目后，对它的工程化和开发模式也是开了眼界，标准的框架体系就是重量级的react+redux+webpack。开发大型项目和后台管理系统用react，vue确实是不错的。但是开发一些小项目，比如前端h5之类的又有杀鸡用牛刀的感觉。</p>
<p>&emsp;&emsp;于是借鉴webpack工程化思想动手写了个前端快速开发模版，用于开发快速简洁的项目，比如之前的单页面应用。而这个项目模版就是类似前端开发的脚手架了，基本的思路就是自动化和前端编译<a id="more"></a>，主要达到以下目的：</p>
<ol>
<li>使用less预编译css，使用autoprefixer进行样式兼容</li>
<li>js代码用babel编译，因此可基于es6，es7编写代码</li>
<li>类库文件使用npm包，js文件使用browserify组织和打包，不再使用sea，require之类的加载器</li>
<li>html代码使用swig模版引擎进行组织和预编译</li>
<li>静态资源版本使用rev管理，当css或js文件内容有变化，打包时自动更新版本</li>
<li>前端开发基础样式，框架的整合。</li>
</ol>
<h3 id="工具链"><a href="#工具链" class="headerlink" title="工具链"></a>工具链</h3><ul>
<li>构建工具gulp</li>
<li>编译打包工具browserify</li>
<li>代码编译babel</li>
<li>css兼容autoprefixer</li>
<li>css预编译less</li>
<li>html代码预编译模版swig</li>
<li>前端代码版本更新rev</li>
</ul>
<h3 id="公共类库"><a href="#公共类库" class="headerlink" title="公共类库"></a>公共类库</h3><ul>
<li>jQuery</li>
<li>Zepto</li>
<li>自己开发的简洁单页面框架app.js</li>
<li>图标fontello</li>
<li>字体reboto</li>
<li>基础样式base.css</li>
</ul>
<h3 id="文件目录结构"><a href="#文件目录结构" class="headerlink" title="文件目录结构"></a>文件目录结构</h3><ul>
<li>css: css文件</li>
<li>less: less文件</li>
<li>js: js文件</li>
<li>dist: 打包生成的项目文件</li>
<li>layout: html母板</li>
<li>lib: 公共类库</li>
<li>template: html页面</li>
</ul>
<h2 id="项目自动化"><a href="#项目自动化" class="headerlink" title="项目自动化"></a>项目自动化</h2><p>&emsp;&emsp;没有使用重量级的webpack，而是使用轻量级的gulp和browserify</p>
<h3 id="公共类库-1"><a href="#公共类库-1" class="headerlink" title="公共类库"></a>公共类库</h3><p>&emsp;&emsp;公共类库的文件，主要有基础样式base.css，图标样式reboto，字体样式fontello，单页面框架app，直接拷贝到dist文件就ok。其他npm包跟nodejs项目一样在node_modules中，不需要处理。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//复制公共库目录下的所有内容</span></span><br><span class="line">gulp.task(<span class="string">'copy'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'./lib/**'</span>)</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./dist/lib/'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="css文件"><a href="#css文件" class="headerlink" title="css文件"></a>css文件</h3><p>&emsp;&emsp;首先将less文件转为css，用autoprefixer添加兼容性前缀，合并压缩，放到dist目录，最后用rev插件生成版本信息，这个后面用于替换更新链接用。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//编译css，添加兼容后缀，压缩</span></span><br><span class="line">gulp.task(<span class="string">'css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'./less/*.less'</span>)</span><br><span class="line">        .pipe(less())</span><br><span class="line">        <span class="comment">// .pipe(concatCss("index.css"))</span></span><br><span class="line">        .pipe(postcss([ autoprefixer(&#123;</span><br><span class="line">                <span class="string">"browsers"</span>: [<span class="string">"last 2 version"</span>, <span class="string">"&gt; 0.5%"</span>, <span class="string">"ie 6-8"</span>,<span class="string">"Firefox &lt; 20"</span>]</span><br><span class="line">                <span class="comment">// "browsers": ["last 2 version", "&gt; 0.1%"]</span></span><br><span class="line">            &#125;)</span><br><span class="line">        ]))</span><br><span class="line">        .pipe(cleanCSS())</span><br><span class="line">        <span class="comment">// .pipe(rename(&#123;suffix: '.min'&#125;))</span></span><br><span class="line">        <span class="comment">// .pipe(gulp.dest('./dist/css'));</span></span><br><span class="line">        .pipe(rev())</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./dist/css'</span>))</span><br><span class="line">        .pipe(rev.manifest())</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./rev/css'</span>));</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="js文件"><a href="#js文件" class="headerlink" title="js文件"></a>js文件</h3><p>&emsp;&emsp;我这里有两个入口文件，可以随时将新入口文件添加到scripts数组中，这里做的就是使用babel转换代码，然后将外部文件，npm包打包进来，生成sourcemap，输出到dist文件夹，最后一样用rev插件生成版本信息。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> scripts=[<span class="string">'app'</span>,<span class="string">'index'</span>];</span><br><span class="line">scripts.map(<span class="function"><span class="params">name</span>=&gt;</span>&#123;</span><br><span class="line">    gulp.task(name,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span>  browserify(&#123;</span><br><span class="line">                entries:<span class="string">'./js/'</span>+name+<span class="string">'.js'</span>,  <span class="comment">//entries file name</span></span><br><span class="line">                debug:<span class="literal">true</span> <span class="comment">// set true so the bundle file can generate sourcemap </span></span><br><span class="line">            &#125;)</span><br><span class="line">            .transform(babelify,&#123; </span><br><span class="line">                plugins: [<span class="string">"transform-runtime"</span>],</span><br><span class="line">                presets: [</span><br><span class="line">                    <span class="string">'es2015'</span>,  <span class="comment">//convert to es5</span></span><br><span class="line">                    <span class="string">'stage-0'</span>  <span class="comment">//es7</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;)</span><br><span class="line">            .bundle()  <span class="comment">//merge</span></span><br><span class="line">            .pipe(source(name+<span class="string">'.js'</span>))</span><br><span class="line">            .pipe(buffer())</span><br><span class="line">            <span class="comment">// .pipe(uglify())</span></span><br><span class="line">            .pipe(sourcemaps.init(&#123;<span class="attr">loadMaps</span>: <span class="literal">true</span>&#125;)) <span class="comment">//External sourcemap file</span></span><br><span class="line">            .pipe(sourcemaps.write(<span class="string">'./'</span>))</span><br><span class="line">            .pipe(rev())</span><br><span class="line">            .pipe(gulp.dest(<span class="string">'./dist/js/'</span>))</span><br><span class="line">            .pipe(rev.manifest(name+<span class="string">'.json'</span>))</span><br><span class="line">            .pipe(gulp.dest(<span class="string">'./rev/js/'</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="html文件"><a href="#html文件" class="headerlink" title="html文件"></a>html文件</h3><p>&emsp;&emsp;html编译我使用的是模版引擎是swig，这里用的是gulp-swig插件，当然也可以用ejs或jade的引擎。但我个人比较习惯用swig，因为它更灵活，支持各种文件格式，可以直接使用html文件，也支持ejs不支持的layout等。gulp-swig插件的使用也非常简单。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//swig编译输出html</span></span><br><span class="line">gulp.task(<span class="string">'html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'./template/*.html'</span>)</span><br><span class="line">    .pipe(swig(&#123;</span><br><span class="line">        defaults: &#123;<span class="attr">cache</span>: <span class="literal">false</span> &#125;</span><br><span class="line">    &#125;))</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'./'</span>))</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="文件版本控制"><a href="#文件版本控制" class="headerlink" title="文件版本控制"></a>文件版本控制</h3><p>&emsp;&emsp;之前编译css和js的时候已经调用rev生成了记录了版本信息的json文件，如果内容有变化它会生成新的md5文件名。这里就是用rev-collector替换html文件中除md5部分外相同文件名的链接，这样就就实现了版本更新功能，用这个插件可以更新css，js，图片等的版本。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//更新css和js版本，同时替换html中的链接标签</span></span><br><span class="line">gulp.task(<span class="string">'rev'</span>, scripts.concat([<span class="string">"css"</span>,<span class="string">"html"</span>]),<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src([<span class="string">'./rev/**/*.json'</span>, <span class="string">'./*.html'</span>])<span class="comment">//add md5 suffix to js and css file, replace the link of html as well </span></span><br><span class="line">        .pipe( revCollector(&#123;</span><br><span class="line">            replaceReved: <span class="literal">true</span>,</span><br><span class="line">            dirReplacements: &#123;</span><br><span class="line">                <span class="string">'/css'</span>: <span class="string">'/css'</span>,</span><br><span class="line">                <span class="string">'/js'</span>: <span class="string">'/js'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe( gulp.dest(<span class="string">'./dist'</span>) );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>html里面替换后的链接格式如下<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/app-d333f590b0.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/app-62bad8e549.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="项目模版"><a href="#项目模版" class="headerlink" title="项目模版"></a>项目模版</h2><p>&emsp;&emsp;项目自动化配置完后，接着就是配置项目模版了，这里分两种类型的模版：1.移动端优先的单页面；2.pc端优先的普通页面。<br>swig标签语法</p>
<ul>
<li>extends 继承父模板，必须在文件最前</li>
<li>block 定义一个块，使之可以被继承的模板重写，或者重写父模板的同名块</li>
<li>parent 将父模板中同名块注入当前块中</li>
<li>include 包含一个模板到当前位置</li>
</ul>
<h3 id="移动端单页面模版"><a href="#移动端单页面模版" class="headerlink" title="移动端单页面模版"></a>移动端单页面模版</h3><p>&emsp;&emsp;在layout文件夹新建移动端的单页面模版app-layout.html，然后再建立子目录partial，用于存放公共代码块。</p>
<p>&emsp;&emsp;我们知道加载页面时再去加载外部文件是需要耗费加载时间，而页面直出可以大大提高加载速度，同时预先加载部分样式也可以避免加载时的白屏问题。这也是我们这里将公共部分的js和css以代码块的形式嵌入到html文件中，达到页面直出的效果。</p>
<p>&emsp;&emsp;swig支持将html文件嵌入，同时也可以将css文件嵌入，我这里就是把单页面样式文件app.css和基础样式文件app-base.css的内容直接输出到style标签中。主要的代码块有：</p>
<ul>
<li>meta.html: 头部meta标签</li>
<li>header-script.html: 主要是动态设置fontsize大小的脚本</li>
<li>footer-script.html: 主要是页面加载过程的动画脚本</li>
</ul>
<p>&emsp;&emsp;当然了图标样式，好看的字体文件，单页面的css，基础的样式css都有， 同时母版还挖出了几个block给继承的页面进行重写，比如block title，block css，block js，内容block content。css块和js块既可以写外部链接也可以直接写代码。 我们可以根据自己的需求进行修改和配置文件，具体内容看如下代码。<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;% block title %&#125;&#123;% endblock %&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">&#123;% include './partial/meta.html' %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 页面内加载的头部js --&gt;</span></span><br><span class="line">&#123;% include './partial/header-script.html' %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 页面内加载的css --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined">&#123;% include '../lib/app/app.css' %&#125;&#123;% include '../lib/app-base.css' %&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 图标 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./lib/fontello/fontello.css"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 字体 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./lib/reboto/roboto.css"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 项目css --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/app.css"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 外部css块 --&gt;</span></span><br><span class="line">&#123;% block css %&#125;&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span> <span class="attr">class</span>=<span class="string">"view-wrap"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"loading"</span> <span class="attr">class</span>=<span class="string">"loading-wrap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loading"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"round"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"txt"</span>&gt;</span>0%<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"freshing"</span> <span class="attr">class</span>=<span class="string">"fresh-wrap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loading"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"round"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"txt"</span>&gt;</span>loading...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 内容填充块 --&gt;</span></span><br><span class="line">&#123;% autoescape false %&#125;</span><br><span class="line">&#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line">&#123;% endautoescape %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 页面内加载的尾部js --&gt;</span></span><br><span class="line">&#123;% include './partial/footer-script.html' %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 外部js块 --&gt;</span></span><br><span class="line">&#123;% block js %&#125;&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="PC端优先模版"><a href="#PC端优先模版" class="headerlink" title="PC端优先模版"></a>PC端优先模版</h3><p>&emsp;&emsp;接着就是建立PC端优先的模版layout.html，这个和单页面模版相似，主要区别就是基础样式，同时不用嵌入移动端的代码，页面模版请看如下代码：<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;% block title %&#125;&#123;% endblock %&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">&#123;% include './partial/meta.html' %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./lib/fontello/fontello.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./lib/reboto/roboto.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined">&#123;% include '../lib/base.css' %&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/index.css"</span>&gt;</span></span><br><span class="line">&#123;% block css %&#125;&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">&#123;% autoescape false %&#125;</span><br><span class="line">&#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line">&#123;% endautoescape %&#125;</span><br><span class="line">&#123;% include './partial/copyright.html' %&#125;</span><br><span class="line">&#123;% block js %&#125;&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><p>&emsp;&emsp;项目模板完成了，我以建立单页面项目为例演示使用的步骤</p>
<ol>
<li><p>首先从github clone模版到文件夹webapp-project,安装相关npm包。</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/edwardzhong/project-template.git webapp-project</span><br><span class="line"></span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
</li>
<li><p>在less文件夹内建立app.less,并编写代码</p>
 <figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@lightBlue:</span>hsl(<span class="number">198</span>, <span class="number">73%</span>, <span class="number">53%</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// base</span></span><br><span class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span>&#123;</span><br><span class="line">	<span class="attribute">font-family</span>: <span class="string">"Roboto"</span>, <span class="string">"Helvetica Neue"</span>, Helvetica, <span class="string">"Hiragino Sans GB"</span>, <span class="string">"Microsoft YaHei"</span>, Arial, sans-serif;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">0.25rem</span>;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span>,<span class="selector-tag">p</span>,<span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>&#123;<span class="attribute">margin</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>&#123;<span class="attribute">list-type</span>:none; <span class="attribute">margin</span>:<span class="number">0</span>; <span class="attribute">padding</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="comment">// todo more ...</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在js文件夹建立app.js并编写代码, 使用es6写代码就是舒服😊</p>
 <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'../lib/zepto.js'</span>);<span class="comment">// zepto没有使用CommonJs规范，修改后使用require引入 </span></span><br><span class="line"><span class="keyword">import</span> &#123; webApp &#125; <span class="keyword">from</span> <span class="string">'../lib/app/app.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> App=webApp(&#123;</span><br><span class="line">	container:<span class="string">'app'</span>,</span><br><span class="line">	animate:&#123; <span class="attr">effects</span>:[<span class="string">'slideInRight'</span>, <span class="string">'slideOutLeft'</span>],<span class="attr">delay</span>:<span class="number">600</span>&#125;,</span><br><span class="line">	preLoad:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;,</span><br><span class="line">	aftLoad:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		loadPercent(<span class="number">100</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line">.other(<span class="string">'/index'</span>,&#123;<span class="attr">temId</span>:<span class="string">'tempIndex'</span>,<span class="attr">create</span>:createIndex&#125;)</span><br><span class="line">.when(<span class="string">'/button'</span>,&#123;<span class="attr">temId</span>:<span class="string">'tempButton'</span>&#125;)</span><br><span class="line">.when(<span class="string">'/form'</span>,&#123;<span class="attr">temId</span>:<span class="string">'tempForm'</span>&#125;)</span><br><span class="line">.when(<span class="string">'/dialog'</span>,&#123;<span class="attr">temId</span>:<span class="string">'tempDialog'</span>,<span class="attr">create</span>:createDialog&#125;)</span><br><span class="line">.init();</span><br><span class="line"></span><br><span class="line"><span class="comment">// todo: more ...</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在template文件夹建立app.html,引用单页面模板app-layout.html,并编写内容,我这里把单页面的各个视图代码也以代码块的方式引入。</p>
 <figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% extends '../layout/app-layout.html' %&#125;</span><br><span class="line">&#123;% block title %&#125;Web App&#123;% endblock %&#125;</span><br><span class="line">&#123;% block js %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/app.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">&#123;% include './partial/index.html' %&#125;</span><br><span class="line">&#123;% include './partial/button.html' %&#125;</span><br><span class="line">&#123;% include './partial/dialog.html' %&#125;</span><br><span class="line">&#123;% include './partial/form.html' %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行自动化命令，进行编译，合并，压缩，打包</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
</li>
<li><p>最后项目文件都输出到dist文件夹，找到app.html运行即可。</p>
</li>
</ol>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>&emsp;&emsp;代码请看<em><a href="https://github.com/edwardzhong/project-template.git" target="_blank" rel="noopener">https://github.com/edwardzhong/project-template.git</a></em></p>
</div>
    	
		<div class="post-footer">
			<div class="share" data-url="/2017/11/27/projecttemplate/" data-desc="
&emsp;&emsp;之前一直在开发移动端的单页面应用，而移动web对性能和效果要求是比较..."><a href="javascript:;" data-type="share" class="icon icon-share"> 分享</a></div>
			<div class="tags">
			<i class="icon icon-tag"></i> 
			
				
				
                    
                        <a href="/tags/前端/">前端</a>
                    
				
                    
                        <a href="/tags/js/">js</a>
                    
				
                    
                        <a href="/tags/gulp/">gulp</a>
                    
				
                    
                        <a href="/tags/browserify/">browserify</a>
                    
				
			
			</div>
		</div>
	</div>
</article>
</div>

<nav class="pagination clearfix">
  
    
      
      <a href="/2017/11/30/managedemo/" class="prev post-prev">&larr; 简洁后台管理模版</a>
      

      
      <a href="/2017/11/24/chartpoint/" class="next post-next">canvas图表(4) - 散点图 &rarr;</a>
      
    
  
</nav>

<div class="wxshare-popup">
    <a class="close" href="javascript:;"><i class="icon icon-cancel"></i></a>
    <p>扫一扫，分享到微信</p>
    <div id="qrcode" class="wx-qrcode"></div>
</div>

    
    <footer class="footer">
<p class="theme">
	Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/edwardzhong/simply.git">simply</a>
</p>
<p class="copy">Copyright &copy; 2019 Jeff Zhong</p>
</footer>
    <div class="top-bottom">
      <div class="to-top hide" title="to top"><i class="icon icon-up-open"></i></div>
      <div class="to-bottom hide" title="to bottom"><i class="icon icon-down-open"></i></div>
    </div>
    </div>

  </div>
<input type="hidden" name="isPost" id="isPost" value="true">
<i id="barBtn" class="icon icon-menu"></i>
<div id="payMe" class="payme">
    <i class="icon icon-cancel"></i>
    <p class="pay-title">给我的早餐加个蛋吧 <i class="icon icon-smile"></i></p>
    <div>
      <img src="/img/weixinpay.jpg" alt="weixinpay">
      <img src="/img/alipay.jpg" alt="alipay" style="display:none;">
    </div>
    <div class="pay-selects">
        <input type="radio" name="pay" id="weixinpay" checked="checked"><label for="weixinpay"> 微信 </label>&nbsp;&nbsp;
        <input type="radio" name="pay" id="alipay"><label for="alipay"> 支付宝 </label>
    </div>
</div>

  
  
    <script src="/lib/jquery-2.2.3.min.js"></script>
  
    <script src="/lib/qrcode.min.js"></script>
  
    <script src="/dist/js/index.js"></script>
  

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


</body>
</html>
