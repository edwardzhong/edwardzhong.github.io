<!doctype html>
<html lang="zh-CN">









<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <!-- ä¼˜å…ˆä½¿ç”¨ IE æœ€æ–°ç‰ˆæœ¬å’Œ Chrome -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <!-- ä¸ºç§»åŠ¨è®¾å¤‡æ·»åŠ  viewport -->
  <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <!-- æ·»åŠ åˆ°ä¸»å±åçš„æ ‡é¢˜ï¼ˆiOS 6 æ–°å¢ï¼‰ -->
  <meta name="apple-mobile-web-app-title" content="canvaså›¾è¡¨(2) - æŠ˜çº¿å›¾ - Jeff's world">
  <!-- æ˜¯å¦å¯ç”¨ WebApp å…¨å±æ¨¡å¼ï¼Œåˆ é™¤è‹¹æœé»˜è®¤çš„å·¥å…·æ å’Œèœå•æ  -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <!-- è®¾ç½®è‹¹æœå·¥å…·æ é¢œè‰² -->
  <meta name="apple-mobile-web-app-status-bar-style" content = "black" />
  <!-- æ·»åŠ æ™ºèƒ½ App å¹¿å‘Šæ¡ Smart App Bannerï¼ˆiOS 6+ Safariï¼‰ -->
  <!-- <meta name = "apple-itunes-app" content = "app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL"> -->
  <!-- å¿½ç•¥é¡µé¢ä¸­çš„æ•°å­—è¯†åˆ«ä¸ºç”µè¯ï¼Œå¿½ç•¥emailè¯†åˆ« -->
  <meta name="format-detection" content = "telphone=no, email=no" />
  <!--ä¸‹é¢ä¸‰ä¸ªæ˜¯æ¸…é™¤ç¼“å­˜ å¾®ä¿¡æµè§ˆå™¨ç¼“å­˜ä¸¥é‡åˆæ— åˆ·æ–°ï¼›è¿™ä¸ªæ–¹æ³•è°ƒè¯•çš„æ—¶å€™å¾ˆæ–¹ä¾¿-->
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta http-equiv="Expires" content="0">
  
  <link rel="dns-prefetch" href="https://jeff_zhong.gitee.io/blog">
  <link rel="icon shortcut" type="image/ico" href="/favicon.ico">
  <meta name="author" content="Jeff Zhong">
  <meta name="description" content="it's a blog by hexo">
  <meta name="keywords" content="hexo theme">
  <title >canvaså›¾è¡¨(2) - æŠ˜çº¿å›¾ - Jeff's world</title>
    <!-- The Open Graph protocol -->
  <meta property="og:url" content="https://jeff_zhong.gitee.io/blog">
  <meta property="og:type" content="blog">
  <meta property="og:title" content="canvaså›¾è¡¨(2) - æŠ˜çº¿å›¾ - Jeff's world">
  <meta property="og:description" content="it's a blog by hexo">
  
    
    
      <link rel="stylesheet" href="./lib/fontello/fontello.css">
    
      <link rel="stylesheet" href="./lib/reboto/roboto.css">
    
      <link rel="stylesheet" href="./css/index.css">
    
  
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?5255e97b442092b8e1a219e6a48a0d42";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/blog/atom.xml" title="Jeff's world" type="application/atom+xml">
</head>
<body>
<header class="header">
  <div class="top"></div>
  <h2>Jeff's World</h2>
  <h3>Things that I'm interested in</h3>
  <div class="menu">
  
  
  
      <a  href="/blog/" title="ä¸» é¡µ">
        <i class="icon-home"></i>
        <span>ä¸» é¡µ</span>
      </a>
  
      <a  href="https://jeff_zhong.gitee.io/demo/" title="Demo">
        <i class="icon-page"></i>
        <span>Demo</span>
      </a>
  
      <a  data-tag="search"  href="javascript:;" title="æœ ç´¢">
        <i class="icon-search"></i>
        <span>æœ ç´¢</span>
      </a>
  
  </div>
  <div class="state">
  
    <a href="/blog/archives">48<br>æ–‡ ç« </a><a href="/blog/categories">2<br>åˆ† ç±»</a><a href="/blog/tags">64<br>æ ‡ ç­¾</a>
  </div>
  <div class="social">
  
  
  
      <a href="https://github.com/edwardzhong" target="_blank" rel="noopener" title="Github"><i class="icon-github"></i></a>
  
      <a href="https://twitter.com/JianfengEdward" target="_blank" rel="noopener" title="Twitter"><i class="icon-twitter"></i></a>
  
      <a href="https://www.facebook.com/jianfeng.edward" target="_blank" rel="noopener" title="Facebook"><i class="icon-facebook"></i></a>
  
      <a href="http://weibo.com/1593251850" target="_blank" rel="noopener" title="Weibo"><i class="icon-weibo"></i></a>
  
      <a href="/blog/atom.xml" title="Rss"><i class="icon-rss"></i></a>
  
  </div>
  <div id="payBtn" class="pay-icon" title="è°¢è°¢æ‚¨çš„èµèµ">èµ</div>
</header>
  <div class="container">
    <div class="main">
    
        
<div class="post-list">
	<article class="post" style="animation:listshow 0.6s ease-out both 0.30000000000000004s">
    
    
        
    
	
	<a href="javascript:;">
        <div class="post-banner" style="background: url(/images/banner3.jpg)  center top / 100% no-repeat">
    		<h3 class="post-title">canvaså›¾è¡¨(2) - æŠ˜çº¿å›¾</h3>
    	</div>
	</a>
	<div class="post-inner">
	
    	<div class="post-info">
    		<time><i class="icon-calendar"></i> 2017/11/21 12:42:00</time>
    		<span class="category">
    		
    			
    			<i class="icon-book"></i>
    			
                    
                        <a href="/blog/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a>
                    
    			
    		
    		</span>
    	</div>
    	<!-- <p><p>è¯è¯´è¿™å¤©æ°”ä¸€å†·å•Š, å°±æ‚£æ‡’ç™Œ, å°±ä¸æƒ³ç ä»£ç , å°±æƒ³ç€åœ¨åºŠä¸Šèˆ’èˆ’æœæœçœ‹è§†é¢‘. é‚£é¡ºä¾¿å°±çœ‹blenderè§†é¢‘, å­¦ä¹ ä¸‹3Då»ºæ¨¡, å¦‚æœå­¦ä¼šäº†å»º3Dæ¨¡å‹, é‚£æˆ‘çš„webGLæŠ€æœ¯å°±å¤§æœ‰ç”¨å¤„å•Š,å¯ä»¥ç‹¬â€¦</p>
</p> -->
    	
    		<div class="post-content"><!-- åŸæ–‡åœ°å€ï¼š[canvaså›¾è¡¨(2) - æŠ˜çº¿å›¾](http://02s949.coding-pages.com/2017/11/21/chartline/) -->
<p>è¯è¯´è¿™å¤©æ°”ä¸€å†·å•Š, å°±æ‚£æ‡’ç™Œ, å°±ä¸æƒ³ç ä»£ç , å°±æƒ³ç€åœ¨åºŠä¸Šèˆ’èˆ’æœæœçœ‹è§†é¢‘. é‚£é¡ºä¾¿å°±çœ‹blenderè§†é¢‘, å­¦ä¹ ä¸‹3Då»ºæ¨¡, å¦‚æœå­¦ä¼šäº†å»º3Dæ¨¡å‹, é‚£æˆ‘çš„webGLæŠ€æœ¯å°±å¤§æœ‰ç”¨å¤„å•Š,å¯ä»¥ç‹¬ç«‹å¼€å‘å°æ¸¸æˆäº†ğŸ˜‚, å½“ç„¶æ˜¯ç©ç¬‘äº†ã€‚ä½†é¦–å…ˆè¿˜æ˜¯æŠŠcanvaså›¾è¡¨ç³»åˆ—å…ˆå¼„å®Œå§, ä»Šå¤©å°±å¼„æŠ˜çº¿å›¾ã€‚</p>
<p>æ•ˆæœè¯·çœ‹ï¼š<em><a href="http://ufcjd3.coding-pages.com/dist/chartline.html" target="_blank" rel="noopener">æŠ˜çº¿å›¾http://ufcjd3.coding-pages.com/dist/chartline.html</a></em></p>
<!-- ![it](http://oncse3u6r.bkt.clouddn.com/chartline.jpg?t=1) -->
<img src="/images/charline.jpg" width="500">
<a id="more"></a>

<p>ä¸»è¦åŠŸèƒ½ç‚¹åŒ…æ‹¬ï¼š</p>
<ol>
<li>ç»„ç»‡æ•°æ®ï¼›</li>
<li>ç»˜åˆ¶ï¼›</li>
<li>æ•°æ®åŠ¨ç”»çš„å®ç°ï¼›</li>
<li>æ¸…å±å¹¶é‡ç»˜ç”»é¢ï¼›</li>
<li>é¼ æ ‡äº‹ä»¶çš„å¤„ç†ã€‚</li>
</ol>
<p>å¤§éƒ¨åˆ†çš„æŠ€æœ¯åœ¨ä¸Šä¸€èŠ‚çš„*<a href="http://02s949.coding-pages.com/2017/11/12/chartbar/" target="_blank" rel="noopener">canvaså›¾è¡¨(1) - æŸ±çŠ¶å›¾</a>*å®ç°äº†, æ‰€ä»¥è¿™èŠ‚å†…å®¹å…¶å®æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚æ¯”è¾ƒéº»çƒ¦ä¸€ç‚¹çš„å°±æ˜¯æŠ˜çº¿å›¾çš„åŠ¨ç”»äº†ï¼Œæ‰€ä»¥é‡ç‚¹å°±çœ‹ä¸€ä¸‹è¿™éƒ¨åˆ†çš„ä»£ç ã€‚</p>
<h2 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h2><p>ä½¿ç”¨æ–¹å¼ï¼Œå’ŒæŸ±çŠ¶å›¾åŸºæœ¬æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬è¿™é‡Œè¡¨ç¤ºçš„æ˜¯æ°”æ¸©å˜åŒ–å›¾ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> con=<span class="built_in">document</span>.getElementById(<span class="string">'container'</span>);</span><br><span class="line"><span class="keyword">var</span> line = <span class="keyword">new</span> Line(con);</span><br><span class="line">line.init(&#123;</span><br><span class="line">	title:<span class="string">'æœªæ¥ä¸€å‘¨æ°”æ¸©å˜åŒ–'</span>,</span><br><span class="line">	xAxis:&#123;</span><br><span class="line">		data:[<span class="string">'å‘¨ä¸€'</span>,<span class="string">'å‘¨äºŒ'</span>,<span class="string">'å‘¨ä¸‰'</span>,<span class="string">'å‘¨å››'</span>,<span class="string">'å‘¨äº”'</span>,<span class="string">'å‘¨å…­'</span>,<span class="string">'å‘¨æ—¥'</span>]</span><br><span class="line">	&#125;,</span><br><span class="line">	yAxis:&#123;</span><br><span class="line">		name:<span class="string">'æ¸©åº¦'</span>,</span><br><span class="line">		formatter:<span class="string">'&#123;value&#125; Â°C'</span></span><br><span class="line">	&#125;,</span><br><span class="line">	series:[</span><br><span class="line">		&#123;</span><br><span class="line">			name:<span class="string">'æœ€é«˜æ°”æ¸©'</span>,</span><br><span class="line">			data:[<span class="number">11</span>, <span class="number">11</span>, <span class="number">15</span>, <span class="number">13</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">10</span>]</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			name:<span class="string">'æœ€ä½æ°”æ¸©'</span>,</span><br><span class="line">			data:[<span class="number">1</span>, <span class="number">-2</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>]</span><br><span class="line">		&#125;	</span><br><span class="line">	]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="ä»£ç ç»“æ„"><a href="#ä»£ç ç»“æ„" class="headerlink" title="ä»£ç ç»“æ„"></a>ä»£ç ç»“æ„</h2><p>æŠ˜çº¿å›¾å¯¹è±¡å¤§ä½“å’ŒæŸ±çŠ¶å›¾ä¸€è‡´ï¼Œåªæ˜¯éƒ¨åˆ†æ–¹æ³•ç»è¿‡é‡æ„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Line</span> <span class="keyword">extends</span> <span class="title">Chart</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(container)&#123;</span><br><span class="line">		<span class="keyword">super</span>(container);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">	init(opt)&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// ç»‘å®šäº‹ä»¶</span></span><br><span class="line">	bindEvent()&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// æ˜¾ç¤ºä¿¡æ¯</span></span><br><span class="line">	showInfo(pos,arr)&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// æ¸…é™¤å†…å®¹å†ç»˜åˆ¶</span></span><br><span class="line">	clearGrid(index)&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// æ‰§è¡Œæ•°æ®åŠ¨ç”»</span></span><br><span class="line">	animate()&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">	create()&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// ç»„ç»‡æ•°æ®</span></span><br><span class="line">	initData()&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// ç»˜åˆ¶</span></span><br><span class="line">	draw()&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ•°æ®åŠ¨ç”»"><a href="#æ•°æ®åŠ¨ç”»" class="headerlink" title="æ•°æ®åŠ¨ç”»"></a>æ•°æ®åŠ¨ç”»</h2><p>æŠ˜çº¿å›¾åŠ¨ç”»å®ç°çš„æ˜¯è·¯å¾„ç»˜åˆ¶ç‰¹æ•ˆï¼Œæ‡‚canvasçš„åŸºæœ¬éƒ½çŸ¥é“åŸç†ï¼Œå°±æ˜¯ç”¨lineToç»˜åˆ¶è·¯å¾„ï¼Œæœ€åstrokeå‡ºæ¥ã€‚ä½†è¿™ä¸ªæŠ˜çº¿å›¾æ˜¯åˆ†æ®µçš„ï¼Œæ‰€ä»¥è¦åˆ†æƒ…å†µå¤„ç†ï¼Œä¸»è¦éš¾ç‚¹å°±æ˜¯è·å–ä¸¤ä¸ªç‚¹ä¹‹é—´çš„åæ ‡ã€‚</p>
<p>ä»”ç»†æ€è€ƒä¸‹å¦‚ä½•å®ç°ç»˜åˆ¶è·¯å¾„åŠ¨ç”»ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“xè½´æ€»é•¿åº¦ï¼Œæ‰€ä»¥å¯ä»¥è®©xä¾æ¬¡é€’å¢ï¼Œå†æ±‚å‡ºxå¯¹åº”çš„yåæ ‡å³å¯ã€‚æ—¢ç„¶çŸ¥é“äº†ä¸¤ä¸ªç‚¹çš„åæ ‡ï¼Œè¿˜çŸ¥é“äº†xåæ ‡ï¼Œæ ¹æ®åŒè§’åº¦ç­‰æ¯”ä¾‹ä¸‰è§’å½¢åŸç†ï¼Œå¾ˆå®¹æ˜“æ±‚å‡ºyåæ ‡ã€‚</p>
<p>è¿˜æœ‰å°±æ˜¯æ›´æ–°çŠ¶æ€çš„ä½ç§»åŠ¨ç”»äº†ï¼Œè¿™ä¸ªå°±æ›´åŠ ç®€å•äº†ï¼Œæ ¹æ®å½“å‰ä½ç½®å’Œè¦å°†è¦ç§»åŠ¨åˆ°çš„ä½ç½®å¯¹æ¯”ï¼Œè¿›è¡Œå¯¹åº”çš„å¢å‡å³å¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">animate()&#123;</span><br><span class="line">	<span class="keyword">var</span> that=<span class="keyword">this</span>,</span><br><span class="line">		ctx=<span class="keyword">this</span>.ctx,</span><br><span class="line">		obj,h=<span class="number">0</span>,</span><br><span class="line">		isStop=<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">	(<span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		ctx.clearRect(<span class="number">0</span>,that.padding+that.paddingTop<span class="number">-5</span>,that.W,that.H<span class="number">-2</span>*that.padding-that.paddingTop+<span class="number">4</span>);</span><br><span class="line">		that.drawY();</span><br><span class="line"></span><br><span class="line">		ctx.save();</span><br><span class="line">		ctx.translate(that.padding,that.H-that.padding);</span><br><span class="line">		isStop=<span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>,item;i&lt;that.animateArr.length;i++)&#123;</span><br><span class="line">			item=that.animateArr[i];</span><br><span class="line">			<span class="keyword">if</span>(item.hide) <span class="keyword">continue</span>;</span><br><span class="line">			ctx.strokeStyle=item.color;</span><br><span class="line">			ctx.lineWidth=item.data[<span class="number">0</span>].w;</span><br><span class="line">			item.isStop=<span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">if</span>(item.create)&#123;<span class="comment">//æ–°å¢ç»˜åˆ¶è·¯å¾„åŠ¨ç”»</span></span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>,jl=item.data.length;j&lt;jl;j++)&#123;</span><br><span class="line">					obj=item.data[j];</span><br><span class="line">					<span class="keyword">if</span>(obj.y&gt;=obj.h)&#123;</span><br><span class="line">						obj.y=obj.p=obj.h;</span><br><span class="line">					&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">						obj.y+=obj.vy;</span><br><span class="line">						item.isStop=<span class="literal">false</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					ctx.beginPath();</span><br><span class="line">					ctx.moveTo(obj.x+obj.w/<span class="number">2</span>,-obj.y);</span><br><span class="line">					ctx.lineTo(obj.x+obj.w/<span class="number">2</span>,<span class="number">-1</span>);</span><br><span class="line">					ctx.stroke();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123; <span class="comment">//æ›´æ–°ä½ç§»åŠ¨ç”»</span></span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>,jl=item.data.length;j&lt;jl;j++)&#123;</span><br><span class="line">					obj=item.data[j];</span><br><span class="line">					<span class="keyword">if</span>(obj.p&gt;obj.h)&#123;</span><br><span class="line">						h=obj.y<span class="number">-4</span>;</span><br><span class="line">						<span class="keyword">if</span>(h&lt;obj.h)&#123;</span><br><span class="line">							obj.y=obj.p=obj.h;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">						h=obj.y+<span class="number">4</span>;</span><br><span class="line">						<span class="keyword">if</span>(h&gt;obj.h)&#123;</span><br><span class="line">							obj.y=obj.p=obj.h;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">if</span>(obj.p!=obj.h)&#123;</span><br><span class="line">						obj.y=h;</span><br><span class="line">						item.isStop=<span class="literal">false</span>;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">					ctx.beginPath();</span><br><span class="line">					ctx.moveTo(obj.x+obj.w/<span class="number">2</span>,-obj.y);</span><br><span class="line">					ctx.lineTo(obj.x+obj.w/<span class="number">2</span>,<span class="number">-1</span>);</span><br><span class="line">					ctx.stroke();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(!item.isStop)&#123;isStop=<span class="literal">false</span>; &#125;</span><br><span class="line">		&#125;</span><br><span class="line">		ctx.restore();</span><br><span class="line">		<span class="keyword">if</span>(isStop)<span class="keyword">return</span>;</span><br><span class="line">		requestAnimationFrame(run);</span><br><span class="line">	&#125;())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¸…å±å¹¶é‡ç»˜ç”»é¢"><a href="#æ¸…å±å¹¶é‡ç»˜ç”»é¢" class="headerlink" title="æ¸…å±å¹¶é‡ç»˜ç”»é¢"></a>æ¸…å±å¹¶é‡ç»˜ç”»é¢</h2><p>åœ¨ç”»é¢ä¸Šè¦å®ç°åŠ¨æ€æ•ˆæœçš„æ—¶å€™ï¼Œéœ€è¦æ¸…å±ï¼Œé‡æ–°ç»˜åˆ¶ç”»é¢ï¼Œå¦‚æœæŒ‡å®šäº†æŸä¸ªåŒºé—´ï¼Œå°±åœ¨è¯¥åŒºé—´ä¸Šç”»æ ‡å¿—çº¿ï¼ŒåŒæ—¶è¯¥åŒºé—´çš„åœ†å¿ƒæ”¾å¤§ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">clearGrid(index)&#123;</span><br><span class="line">	<span class="keyword">var</span> that=<span class="keyword">this</span>,</span><br><span class="line">		obj, r=<span class="number">5</span>,</span><br><span class="line">		ctx=<span class="keyword">this</span>.ctx;</span><br><span class="line">	ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,that.W,that.H);</span><br><span class="line">	<span class="comment">// ç”»åæ ‡ç³»</span></span><br><span class="line">	<span class="keyword">this</span>.drawAxis();</span><br><span class="line">	<span class="comment">// ç”»æ ‡ç­¾</span></span><br><span class="line">	<span class="keyword">this</span>.drawTag();</span><br><span class="line">	<span class="comment">// ç”»yè½´åˆ»åº¦</span></span><br><span class="line">	<span class="keyword">this</span>.drawY();</span><br><span class="line"></span><br><span class="line">	ctx.save();</span><br><span class="line">	ctx.translate(that.padding,that.H-that.padding);</span><br><span class="line">	<span class="comment">// ç”»æ ‡å¿—çº¿</span></span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">typeof</span> index== <span class="string">'number'</span>)&#123;</span><br><span class="line">		obj=that.animateArr[<span class="number">0</span>].data[index];</span><br><span class="line">		ctx.lineWidth=<span class="number">1</span>;</span><br><span class="line">		ctx.strokeStyle=<span class="string">'hsla(0,0%,70%,1)'</span>;</span><br><span class="line">		ctx.moveTo(obj.x,-that.H+that.paddingTop+<span class="number">2</span>*that.padding);</span><br><span class="line">		ctx.lineTo(obj.x,<span class="number">0</span>);</span><br><span class="line">		ctx.stroke();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>,item,il=that.animateArr.length;i&lt;il;i++)&#123;</span><br><span class="line">		item=that.animateArr[i];</span><br><span class="line">		<span class="keyword">if</span>(item.hide)<span class="keyword">continue</span>;</span><br><span class="line">		ctx.lineWidth=<span class="number">4</span>;</span><br><span class="line">		ctx.strokeStyle=item.color;</span><br><span class="line">		ctx.fillStyle=<span class="string">'#fff'</span>;</span><br><span class="line">		ctx.beginPath();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>,obj,jl=item.data.length;j&lt;jl;j++)&#123;</span><br><span class="line">			obj=item.data[j];</span><br><span class="line">			<span class="keyword">if</span>(j==<span class="number">0</span>)&#123;</span><br><span class="line">				ctx.moveTo(obj.x,-obj.h);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				ctx.lineTo(obj.x,-obj.h);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		ctx.stroke();</span><br><span class="line"></span><br><span class="line">		<span class="comment">//ç”»å®Œæ›²çº¿åå†ç”»åœ†çƒ</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>,jl=item.data.length;j&lt;jl;j++)&#123;</span><br><span class="line">			obj=item.data[j];</span><br><span class="line">			ctx.strokeStyle=item.color;</span><br><span class="line">			ctx.lineWidth=index===j?<span class="number">6</span>:<span class="number">4</span>;</span><br><span class="line">			r=index===j?<span class="number">10</span>:<span class="number">5</span>;</span><br><span class="line">			ctx.beginPath();</span><br><span class="line">			ctx.arc(obj.x,-obj.h,r,<span class="number">0</span>,<span class="built_in">Math</span>.PI*<span class="number">2</span>,<span class="literal">false</span>);</span><br><span class="line">			ctx.stroke();</span><br><span class="line">			ctx.fill();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	ctx.restore();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äº‹ä»¶å¤„ç†"><a href="#äº‹ä»¶å¤„ç†" class="headerlink" title="äº‹ä»¶å¤„ç†"></a>äº‹ä»¶å¤„ç†</h2><p>mousemove ä¸€æ˜¯è§¦æ‘¸æ ‡ç­¾æ˜¾ç¤ºæ‰‹å½¢ï¼ŒäºŒæ˜¯æ»‘è¿‡ç”»é¢åŒºåŸŸçš„æ—¶å€™æ“¦é™¤å¹¶é‡ç»˜ç”»é¢ï¼Œé€‰ä¸­çš„æŠ˜çº¿çš„åœ†å½¢æ‰©å¤§ï¼ŒåŒæ—¶ç»˜åˆ¶æŒ‡ç¤ºçº¿ï¼Œå…·ä½“çœ‹clearGridæ–¹æ³•ã€‚</p>
<p>mousedownæŸä¸ªå‡»æ ‡ç­¾å°±ä¼šæ˜¾ç¤ºéšè—å¯¹åº”åˆ†ç»„ï¼Œåˆ›å»ºçŠ¶æ€æ‰§è¡Œè·¯å¾„ç»˜åˆ¶åŠ¨ç”»ï¼Œè€Œæ›´æ–°çŠ¶æ€è¿™æ˜¯æ‰§è¡Œä½ç§»åŠ¨ç”»ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">bindEvent()&#123;</span><br><span class="line">	<span class="keyword">var</span> that=<span class="keyword">this</span>,</span><br><span class="line">		ctx=that.ctx,</span><br><span class="line">		canvas=that.canvas,</span><br><span class="line">		xl=<span class="keyword">this</span>.xAxis.data.length,</span><br><span class="line">		xs=(that.W<span class="number">-2</span>*that.padding)/(xl<span class="number">-1</span>),</span><br><span class="line">		index=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">this</span>.canvas.addEventListener(<span class="string">'mousemove'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">var</span> isLegend=<span class="literal">false</span>;</span><br><span class="line">		<span class="comment">// todo ...</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(isLegend) <span class="keyword">return</span>;</span><br><span class="line">		<span class="comment">// é¼ æ ‡ä½ç½®åœ¨å›¾è¡¨ä¸­æ—¶</span></span><br><span class="line">		<span class="keyword">if</span>(pos.y*<span class="number">2</span>&gt;that.padding+that.paddingTop &amp;&amp; pos.y*<span class="number">2</span>&lt;that.H-that.padding &amp;&amp; pos.x*<span class="number">2</span>&gt;that.padding &amp;&amp; pos.x*<span class="number">2</span>&lt;that.W-that.padding)&#123;</span><br><span class="line">			canvas.style.cursor=<span class="string">'pointer'</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;xl;i++)&#123;</span><br><span class="line">				<span class="keyword">if</span>(pos.x*<span class="number">2</span>&gt;i*xs)&#123;</span><br><span class="line">					index=i;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// é‡ç»˜å¹¶æ ‡å¿—é€‰ä¸­ä¿¡æ¯</span></span><br><span class="line">			that.clearGrid(index);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// è·å–å¤„äºå½“å‰ä½ç½®çš„ä¿¡æ¯</span></span><br><span class="line">			<span class="keyword">var</span> arr=[];</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>,item,l=that.animateArr.length;j&lt;l;j++)&#123;</span><br><span class="line">				item=that.animateArr[j];</span><br><span class="line">				<span class="keyword">if</span>(item.hide)<span class="keyword">continue</span>;</span><br><span class="line">				arr.push(&#123;<span class="attr">name</span>:item.name, <span class="attr">num</span>:item.data[index].num&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">			that.showInfo(pos,arr);</span><br><span class="line">			ctx.restore();</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			that.tip.style.display=<span class="string">'none'</span>;</span><br><span class="line">			that.clearGrid();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">this</span>.canvas.addEventListener(<span class="string">'mousedown'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">		e.preventDefault();</span><br><span class="line">		<span class="keyword">var</span> box=that.canvas.getBoundingClientRect();</span><br><span class="line">		<span class="keyword">var</span> pos = &#123;</span><br><span class="line">			x:e.clientX-box.left,</span><br><span class="line">			y:e.clientY-box.top</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>,item,len=that.legend.length;i&lt;len;i++)&#123;</span><br><span class="line">			item=that.legend[i];</span><br><span class="line">			roundRect(ctx,item.x,item.y,item.w,item.h,item.r);</span><br><span class="line">			<span class="keyword">if</span>(ctx.isPointInPath(pos.x*<span class="number">2</span>,pos.y*<span class="number">2</span>))&#123;</span><br><span class="line">				that.series[i].hide=!that.series[i].hide;</span><br><span class="line">				that.create();</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>æ‰€æœ‰å›¾è¡¨ä»£ç è¯·çœ‹<em><a href="https://github.com/edwardzhong/html5Canvas/blob/master/chart/chart.js" target="_blank" rel="noopener">chart.js</a></em></p>
</div>
    	
		<div class="post-footer">
			<div class="tags">
				<i class="icon-tags"></i> 
				
					
					
						
							<a href="/blog/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
						
					
						
							<a href="/blog/tags/js/">js</a>
						
					
						
							<a href="/blog/tags/canvas/">canvas</a>
						
					
				
			</div>
			<a class="share" href="javascript:;" data-url="/blog/2017/11/21/chartline/" data-desc="
è¯è¯´è¿™å¤©æ°”ä¸€å†·å•Š, å°±æ‚£æ‡’ç™Œ, å°±ä¸æƒ³ç ä»£ç , å°±æƒ³ç€åœ¨åºŠä¸Šèˆ’èˆ’æœæœçœ‹è§†é¢‘. é‚£é¡ºä¾¿å°±çœ‹bl..." data-type="share" title="share"><i class="icon-share"></i></a>
		</div>
	</div>
</article>
</div>
<nav class="pagination clearfix">
  
    
      
        <a href="/blog/2017/11/23/chartpie/" class="prev post-prev"> <i class="icon-leftarrow"></i> canvaså›¾è¡¨(3) - é¥¼å›¾</a>
      

      
        <a href="/blog/2017/11/14/webgl3d/" class="next post-next"> WebGLå­¦ä¹ (2) - 3Dåœºæ™¯ <i class="icon-rightarrow"></i></a>
      
    
  
</nav>

<div class="wxshare-popup">
    <a class="close" href="javascript:;"></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <div id="qrcode" class="wx-qrcode"></div>
</div>

    
    <footer class="footer">
<p class="theme">
	Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/edwardzhong/simply.git" target="_blank" rel="noopener">simply</a>
</p>
<p class="copy">Copyright &copy; 2021 Jeff Zhong</p>
</footer>
    <div class="top-bottom">
      <div class="to-top hide" title="to top"><i class="icon-up"></i></div>
      <div class="to-bottom hide" title="to bottom"><i class="icon-down"></i></div>
    </div>
    </div>

  </div>
<input type="hidden" name="isPost" id="isPost" value="true">
<i id="barBtn" class="icon icon-menu"></i>
<div id="payMe" class="payme">
    <i class="icon icon-cancel"></i>
    <p class="pay-title">ç»™æˆ‘çš„æ—©é¤åŠ ä¸ªè›‹å§ ğŸ˜Š</p>
    <div>
      <img src="/images/weixinpay.jpg" alt="weixinpay">
      <img src="/images/alipay.jpg" alt="alipay" style="display:none;">
    </div>
    <div class="pay-selects">
        <input type="radio" name="pay" id="weixinpay" checked="checked"><label for="weixinpay"> å¾®ä¿¡ </label>&nbsp;&nbsp;
        <input type="radio" name="pay" id="alipay"><label for="alipay"> æ”¯ä»˜å® </label>
    </div>
</div>

  
  
    <script src="./lib/jquery-2.2.3.min.js"></script>
  
    <script src="./lib/qrcode.min.js"></script>
  
    <script src="./js/index.js"></script>
  

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</body>
</html>
