<!doctype html>
<html lang="zh-CN">









<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <!-- ä¼˜å…ˆä½¿ç”¨ IE æœ€æ–°ç‰ˆæœ¬å’Œ Chrome -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <!-- ä¸ºç§»åŠ¨è®¾å¤‡æ·»åŠ  viewport -->
  <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <!-- æ·»åŠ åˆ°ä¸»å±åçš„æ ‡é¢˜ï¼ˆiOS 6 æ–°å¢ï¼‰ -->
  <meta name="apple-mobile-web-app-title" content="WebGLå­¦ä¹ (3) - 3Dæ¨¡å‹ - Jeff's world">
  <!-- æ˜¯å¦å¯ç”¨ WebApp å…¨å±æ¨¡å¼ï¼Œåˆ é™¤è‹¹æœé»˜è®¤çš„å·¥å…·æ å’Œèœå•æ  -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <!-- è®¾ç½®è‹¹æœå·¥å…·æ é¢œè‰² -->
  <meta name="apple-mobile-web-app-status-bar-style" content = "black" />
  <!-- æ·»åŠ æ™ºèƒ½ App å¹¿å‘Šæ¡ Smart App Bannerï¼ˆiOS 6+ Safariï¼‰ -->
  <!-- <meta name = "apple-itunes-app" content = "app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL"> -->
  <!-- å¿½ç•¥é¡µé¢ä¸­çš„æ•°å­—è¯†åˆ«ä¸ºç”µè¯ï¼Œå¿½ç•¥emailè¯†åˆ« -->
  <meta name="format-detection" content = "telphone=no, email=no" />
  <!--ä¸‹é¢ä¸‰ä¸ªæ˜¯æ¸…é™¤ç¼“å­˜ å¾®ä¿¡æµè§ˆå™¨ç¼“å­˜ä¸¥é‡åˆæ— åˆ·æ–°ï¼›è¿™ä¸ªæ–¹æ³•è°ƒè¯•çš„æ—¶å€™å¾ˆæ–¹ä¾¿-->
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta http-equiv="Expires" content="0">
  
  <link rel="dns-prefetch" href="https://jeff_zhong.gitee.io">
  <link rel="icon shortcut" type="image/ico" href="/favicon.ico">
  <meta name="author" content="Jeff Zhong">
  <meta name="description" content="it's a blog by hexo">
  <meta name="keywords" content="hexo theme">
  <title >WebGLå­¦ä¹ (3) - 3Dæ¨¡å‹ - Jeff's world</title>
    <!-- The Open Graph protocol -->
  <meta property="og:url" content="https://jeff_zhong.gitee.io">
  <meta property="og:type" content="blog">
  <meta property="og:title" content="WebGLå­¦ä¹ (3) - 3Dæ¨¡å‹ - Jeff's world">
  <meta property="og:description" content="it's a blog by hexo">
  
    
    
      <link rel="stylesheet" href="/blog/lib/fontello/fontello.css">
    
      <link rel="stylesheet" href="/blog/lib/reboto/roboto.css">
    
      <link rel="stylesheet" href="/blog/css/index.css">
    
  
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?5255e97b442092b8e1a219e6a48a0d42";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/blog/atom.xml" title="Jeff's world" type="application/atom+xml">
</head>
<body>
<header class="header">
  <div class="top"></div>
  <h2>Jeff's World</h2>
  <h3>Things that I'm interested in</h3>
  <div class="menu">
  
  
  
      <a  href="/blog/" title="ä¸» é¡µ">
        <i class="icon-home"></i>
        <span>ä¸» é¡µ</span>
      </a>
  
      <a  href="https://jeff_zhong.gitee.io/demo/" title="Demo">
        <i class="icon-page"></i>
        <span>Demo</span>
      </a>
  
      <a  data-tag="search"  href="javascript:;" title="æœ ç´¢">
        <i class="icon-search"></i>
        <span>æœ ç´¢</span>
      </a>
  
  </div>
  <div class="state">
  
    <a href="/blog/archives">53<br>æ–‡ ç« </a><a href="/blog/categories">2<br>åˆ† ç±»</a><a href="/blog/tags">70<br>æ ‡ ç­¾</a>
  </div>
  <div class="social">
  
  
  
      <a href="https://github.com/edwardzhong" target="_blank" rel="noopener" title="Github"><i class="icon-github"></i></a>
  
      <a href="https://twitter.com/JianfengEdward" target="_blank" rel="noopener" title="Twitter"><i class="icon-twitter"></i></a>
  
      <a href="https://www.facebook.com/jianfeng.edward" target="_blank" rel="noopener" title="Facebook"><i class="icon-facebook"></i></a>
  
      <a href="http://weibo.com/1593251850" target="_blank" rel="noopener" title="Weibo"><i class="icon-weibo"></i></a>
  
      <a href="/blog/atom.xml" title="Rss"><i class="icon-rss"></i></a>
  
  </div>
  <div id="payBtn" class="pay-icon" title="è°¢è°¢æ‚¨çš„èµèµ">èµ</div>
</header>
  <div class="container">
    <div class="main">
    
        
<div class="post-list">
	<article class="post" style="animation:listshow 0.6s ease-out both 0.30000000000000004s">
    
    
        
    
	
	<a href="javascript:;">
        <div class="post-banner" style="background: url(/blog/images/banner1.jpg)  center top / 100% no-repeat">
    		<h3 class="post-title">WebGLå­¦ä¹ (3) - 3Dæ¨¡å‹</h3>
    	</div>
	</a>
	<div class="post-inner">
	
    	<div class="post-info">
    		<time><i class="icon-calendar"></i> 2017/12/26 03:19:00</time>
    		<span class="category">
    		
    			
    			<i class="icon-book"></i>
    			
                    
                        <a href="/blog/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a>
                    
    			
    		
    		</span>
    	</div>
    	<!-- <p><p>ç›¸ä¿¡å¾ˆå¤šäººæ˜¯ä»¥åˆ›å»ºé€¼çœŸé…·ç‚«çš„ä¸‰ç»´æ•ˆæœä¸ºç›®æ ‡è€Œå­¦ä¹ webGLçš„å§ï¼Œé¦–å…ˆæˆ‘å°±æ˜¯ğŸ˜‚ã€‚æˆ‘æŒæ¡äº†è¶³å¤Ÿçš„webGLæŠ€å·§åï¼Œæ­£å‡†å¤‡å¤§å±•èº«æ‰‹æ—¶ï¼Œé‡åˆ°äº†ä¸€ç§å°´å°¬çš„æƒ…å†µï¼šè¿˜æ˜¯åšä¸å‡ºæƒ³è¦çš„ä¸œè¥¿ğŸ˜­ã€‚ä¸ºå•¥å‘¢ï¼Œå› ä¸ºæ²¡â€¦</p>
</p> -->
    	
    		<div class="post-content"><!-- åŸæ–‡åœ°å€ï¼š[WebGLå­¦ä¹ (3) - 3Dæ¨¡å‹](https://jeff_zhong.gitee.io/blog/2017/12/26/webglspitfire/) -->
<p>ç›¸ä¿¡å¾ˆå¤šäººæ˜¯ä»¥åˆ›å»ºé€¼çœŸé…·ç‚«çš„ä¸‰ç»´æ•ˆæœä¸ºç›®æ ‡è€Œå­¦ä¹ webGLçš„å§ï¼Œé¦–å…ˆæˆ‘å°±æ˜¯ğŸ˜‚ã€‚æˆ‘æŒæ¡äº†è¶³å¤Ÿçš„webGLæŠ€å·§åï¼Œæ­£å‡†å¤‡å¤§å±•èº«æ‰‹æ—¶ï¼Œé‡åˆ°äº†ä¸€ç§å°´å°¬çš„æƒ…å†µï¼šè¿˜æ˜¯åšä¸å‡ºæƒ³è¦çš„ä¸œè¥¿ğŸ˜­ã€‚ä¸ºå•¥å‘¢ï¼Œå› ä¸ºæ²¡æœ‰3Dæ¨¡å‹å¯ä¾›æ“ä½œå•Šï¼Œçº¯ç²¹ç”¨ä»£ç æ„å»ºå¤æ‚çš„3Dæ¨¡å‹å®Œå…¨ä¸å¯æƒ³è±¡ã€‚</p>
<p>å¿…é¡»ä½¿ç”¨3dMaxï¼Œmayaï¼Œä»¥åŠå¼€æºçš„blenderç­‰å»ºæ¨¡è½¯ä»¶è¿›è¡Œæ„å»ºã€‚æ—¢ç„¶å·²ç»å…¥äº†webGLçš„å‘äº†ï¼Œé‚£ä¹Ÿåªèƒ½ç¡¬ç€å¤´çš®ç»§ç»­å­¦ä¹ 3Då»ºæ¨¡ï¼Œæ–­æ–­ç»­ç»­å­¦äº†ä¸€ä¸ªå¤šæœˆçš„blenderæ•™ç¨‹ï¼Œæ€»ç®—å…¥é—¨äº†ã€‚</p>
<p>è¿™èŠ‚ä¸»è¦å­¦ä¹ å¦‚ä½•å¯¼å…¥æ¨¡å‹æ–‡ä»¶ï¼Œç„¶åç”¨ä»£ç åº”ç”¨æ•ˆæœï¼Œæ“ä½œæ¨¡å‹ã€‚é¦–å…ˆå±•ç¤ºä¸‹æˆ‘çš„å¤§ä½œï¼Œå–·ç«æˆ˜æ–—æœºçš„3Dæ¨¡å‹ï¼š<em><a href="https://jeff_zhong.gitee.io/demo/dist/webglSpitfire.html">webGL å–·ç«æˆ˜æ–—æœº</a></em><br><img src="/blog/images/fighter.gif" width="600"></p>
<a id="more"></a>

<h2 id="å†…å®¹å¤§çº²"><a href="#å†…å®¹å¤§çº²" class="headerlink" title="å†…å®¹å¤§çº²"></a>å†…å®¹å¤§çº²</h2><ol>
<li>æ¨¡å‹æ–‡ä»¶</li>
<li>ç€è‰²å™¨</li>
<li>å…‰ç…§</li>
<li>æ¨¡å‹å˜æ¢</li>
<li>äº‹ä»¶å¤„ç†</li>
</ol>
<h2 id="æ¨¡å‹æ–‡ä»¶"><a href="#æ¨¡å‹æ–‡ä»¶" class="headerlink" title="æ¨¡å‹æ–‡ä»¶"></a>æ¨¡å‹æ–‡ä»¶</h2><p>blenderå¯¼å‡ºçš„æ¨¡å‹æ–‡ä»¶plane.obj, åŒæ—¶è¿˜åŒ…æ‹¬æè´¨æ–‡ä»¶plane.mtlã€‚æ¨¡å‹åŒ…æ‹¬2800å¤šä¸ªé¡¶ç‚¹ï¼Œ2200å¤šä¸ªé¢ï¼Œå…±200å¤škçš„ä½“ç§¯ï¼Œå†…å®¹æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥åªèƒ½å°†æ–‡ä»¶åŠ è½½å…¥htmlæ–‡ä»¶æ¯”è¾ƒæ–¹ä¾¿ã€‚</p>
<p>æ€ä¹ˆåŠ è½½å‘¢ï¼Ÿä¸€èˆ¬ä¼šä½¿ç”¨ajaxè·å–ï¼Œä½†æˆ‘è¿™é‡Œæœ‰æ›´æ–¹ä¾¿çš„åŠæ³•ã€‚é‚£å°±æ˜¯å°†æ¨¡å‹æ–‡ä»¶å†…å®¹é¢„ç¼–è¯‘ç›´å‡ºåˆ°htmlä¸­ï¼Œè¿™æ ·ä¸ä½†æé«˜äº†åŠ è½½æ€§èƒ½ï¼Œå¼€å‘ä¹Ÿæ›´æ–¹ä¾¿ã€‚å…·ä½“å¯å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ï¼š<em><a href="https://jeff_zhong.gitee.io/blog/2017/11/27/projecttemplate/">å‰ç«¯å¿«é€Ÿå¼€å‘æ¨¡ç‰ˆ</a></em></p>
<p>è¿™é‡Œä½¿ç”¨æˆ‘ä¹‹å‰çš„å¼€å‘æ¨¡ç‰ˆ, å°†æ¨¡å‹(objã€mtl)æ–‡ä»¶ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å†™å…¥text/templateæ¨¡ç‰ˆä¸­ï¼ŒåŒæ—¶å°†GLSLè¯­è¨€å†™çš„ç€è‰²å™¨ä¹Ÿé¢„ç¼–è¯‘åˆ°htmlä¸­ã€‚åˆ°æ—¶ç”¨gulpçš„å‘½ä»¤æ„å»ºé¡µé¢ï¼Œæ‰€æœ‰å†…å®¹å°±ä¼šè‡ªåŠ¨ç”Ÿæˆåˆ°é¡µé¢ä¸­ï¼Œhtmléƒ¨åˆ†çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% extends '../layout/layout.html' %&#125;</span><br><span class="line">&#123;% block title %&#125;spitfire fighter&#123;% endblock %&#125;</span><br><span class="line">&#123;% block js %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/webgl.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/objParse.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/matrix.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¸Šä¸‹å·¦å³æ–¹å‘é”® è°ƒæ•´è§†è§’ï¼ŒW/S/A/Dé”® æ—‹è½¬æ¨¡å‹ï¼Œ +/-é”® æ”¾å¤§ç¼©å°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"800"</span> <span class="attr">height</span>=<span class="string">"600"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- objæ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/template"</span> <span class="attr">id</span>=<span class="string">"tplObj"</span>&gt;</span></span><br><span class="line"><span class="actionscript">&#123;% <span class="meta"><span class="meta-keyword">include</span> '../model/plane.obj' %&#125;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mtlæ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/template"</span> <span class="attr">id</span>=<span class="string">"tplMtl"</span>&gt;</span></span><br><span class="line"><span class="actionscript">&#123;% <span class="meta"><span class="meta-keyword">include</span> '../model/plane.mtl' %&#125;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é¡¶ç‚¹ç€è‰²å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"x-shader/x-vertex"</span> <span class="attr">id</span>=<span class="string">"vs"</span>&gt;</span></span><br><span class="line"><span class="actionscript">&#123;% <span class="meta"><span class="meta-keyword">include</span> '../glsl/vs.glsl' %&#125;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç‰‡å…ƒç€è‰²å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"x-shader/x-fragment"</span> <span class="attr">id</span>=<span class="string">"fs"</span>&gt;</span></span><br><span class="line"><span class="actionscript">&#123;% <span class="meta"><span class="meta-keyword">include</span> '../glsl/fs.glsl' %&#125;	</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<h3 id="objæ–‡ä»¶"><a href="#objæ–‡ä»¶" class="headerlink" title="objæ–‡ä»¶"></a>objæ–‡ä»¶</h3><p>objæ–‡ä»¶åŒ…å«çš„æ˜¯æ¨¡å‹çš„é¡¶ç‚¹æ³•çº¿ç´¢å¼•ç­‰ä¿¡æ¯ã€‚è¿™é‡Œä»¥æœ€ç®€å•çš„ç«‹æ–¹ä½“ä¸ºä¾‹ã€‚</p>
<ul>
<li>v å‡ ä½•ä½“é¡¶ç‚¹</li>
<li>vt è´´å›¾åæ ‡ç‚¹</li>
<li>vn é¡¶ç‚¹æ³•çº¿</li>
<li>f é¢ï¼šé¡¶ç‚¹ç´¢å¼• / çº¹ç†åæ ‡ç´¢å¼• / æ³•çº¿ç´¢å¼•</li>
<li>usemtl ä½¿ç”¨çš„æè´¨åç§°</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Blender v2.79 (sub 0) OBJ File: &#39;&#39;</span><br><span class="line"># www.blender.org</span><br><span class="line">mtllib cube.mtl</span><br><span class="line">o Cube</span><br><span class="line">v -0.442946 -1.000000 -1.000000</span><br><span class="line">v -0.442946 -1.000000 1.000000</span><br><span class="line">v -2.442946 -1.000000 1.000000</span><br><span class="line">v -2.442945 -1.000000 -1.000000</span><br><span class="line">v -0.442945 1.000000 -0.999999</span><br><span class="line">v -0.442946 1.000000 1.000001</span><br><span class="line">v -2.442946 1.000000 1.000000</span><br><span class="line">v -2.442945 1.000000 -1.000000</span><br><span class="line">vn 0.0000 -1.0000 0.0000</span><br><span class="line">vn 0.0000 1.0000 0.0000</span><br><span class="line">vn 1.0000 0.0000 0.0000</span><br><span class="line">vn -0.0000 -0.0000 1.0000</span><br><span class="line">vn -1.0000 -0.0000 -0.0000</span><br><span class="line">vn 0.0000 0.0000 -1.0000</span><br><span class="line">usemtl Material</span><br><span class="line">s off</span><br><span class="line">f 1&#x2F;&#x2F;1 2&#x2F;&#x2F;1 3&#x2F;&#x2F;1 4&#x2F;&#x2F;1</span><br><span class="line">f 5&#x2F;&#x2F;2 8&#x2F;&#x2F;2 7&#x2F;&#x2F;2 6&#x2F;&#x2F;2</span><br><span class="line">f 1&#x2F;&#x2F;3 5&#x2F;&#x2F;3 6&#x2F;&#x2F;3 2&#x2F;&#x2F;3</span><br><span class="line">f 2&#x2F;&#x2F;4 6&#x2F;&#x2F;4 7&#x2F;&#x2F;4 3&#x2F;&#x2F;4</span><br><span class="line">f 3&#x2F;&#x2F;5 7&#x2F;&#x2F;5 8&#x2F;&#x2F;5 4&#x2F;&#x2F;5</span><br><span class="line">f 5&#x2F;&#x2F;6 1&#x2F;&#x2F;6 4&#x2F;&#x2F;6 8&#x2F;&#x2F;6</span><br></pre></td></tr></table></figure>

<h3 id="mtlæ–‡ä»¶"><a href="#mtlæ–‡ä»¶" class="headerlink" title="mtlæ–‡ä»¶"></a>mtlæ–‡ä»¶</h3><p>mtlæ–‡ä»¶åŒ…å«çš„æ˜¯æ¨¡å‹çš„æè´¨ä¿¡æ¯</p>
<ul>
<li>Ka ç¯å¢ƒè‰²  rgb</li>
<li>Kd æ¼«åå°„è‰²,æè´¨é¢œè‰²  rgb</li>
<li>Ks é«˜å…‰è‰²ï¼Œæè´¨é«˜å…‰é¢œè‰² rgb</li>
<li>Ns åå°„é«˜å…‰åº¦ æŒ‡å®šæè´¨çš„åå°„æŒ‡æ•°</li>
<li>Ni æŠ˜å°„å€¼ æŒ‡å®šæè´¨è¡¨é¢çš„å…‰å¯†åº¦</li>
<li>d é€æ˜åº¦ </li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Blender MTL File: &#39;None&#39;</span><br><span class="line"># Material Count: 1</span><br><span class="line"></span><br><span class="line">newmtl Material</span><br><span class="line">Ns 96.078431</span><br><span class="line">Ka 1.000000 1.000000 1.000000</span><br><span class="line">Kd 0.640000 0.640000 0.640000</span><br><span class="line">Ks 0.500000 0.500000 0.500000</span><br><span class="line">Ke 0.000000 0.000000 0.000000</span><br><span class="line">Ni 1.000000</span><br><span class="line">d 1.000000</span><br><span class="line">illum 2</span><br></pre></td></tr></table></figure>

<p>çŸ¥é“äº†objå’Œmtlæ–‡ä»¶çš„æ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯è¯»å–å®ƒä»¬ï¼Œé€è¡Œåˆ†æï¼Œè¿™é‡Œä½¿ç”¨çš„objParseè¯»å–è§£æï¼Œæƒ³çŸ¥é“å†…éƒ¨åŸç†ï¼Œå¯ä»¥æŸ¥çœ‹æºä»£ç ï¼Œè¿™é‡Œä¸è¯¦è¿°ã€‚</p>
<p>æå–å‡ºéœ€è¦çš„ä¿¡æ¯åï¼Œå°±å¯å°†æ¨¡å‹ä¿¡æ¯å†™å…¥ç¼“å†²åŒºï¼Œç„¶åæ¸²æŸ“å‡ºæ¥ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>),</span><br><span class="line">  gl = get3DContext(canvas, <span class="literal">true</span>),</span><br><span class="line">  objElem = <span class="built_in">document</span>.getElementById(<span class="string">'tplObj'</span>),</span><br><span class="line">  mtlElem = <span class="built_in">document</span>.getElementById(<span class="string">'tplMtl'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–å˜é‡åœ°å€</span></span><br><span class="line">    <span class="keyword">var</span> program = gl.program;</span><br><span class="line">    program.a_Position = gl.getAttribLocation(gl.program, <span class="string">'a_Position'</span>);</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºç©ºæ•°æ®ç¼“å†²</span></span><br><span class="line">    <span class="keyword">var</span> vertexBuffer = createEmptyArrayBuffer(gl, program.a_Position, <span class="number">3</span>, gl.FLOAT);</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ†ææ¨¡å‹å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">var</span> objDoc = <span class="keyword">new</span> OBJDoc(<span class="string">'plane'</span>,objElem.text,mtlElem.text);</span><br><span class="line">    <span class="keyword">if</span>(!objDoc.parse(<span class="number">1</span>, <span class="literal">false</span>))&#123;<span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="keyword">var</span> drawingInfo = objDoc.getDrawingInfo();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æ•°æ®å†™å…¥ç¼“å†²åŒº</span></span><br><span class="line">    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);</span><br><span class="line">    gl.bufferData(gl.ARRAY_BUFFER, drawingInfo.vertices, gl.STATIC_DRAW);</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç€è‰²å™¨"><a href="#ç€è‰²å™¨" class="headerlink" title="ç€è‰²å™¨"></a>ç€è‰²å™¨</h2><h3 id="é¡¶ç‚¹ç€è‰²å™¨"><a href="#é¡¶ç‚¹ç€è‰²å™¨" class="headerlink" title="é¡¶ç‚¹ç€è‰²å™¨"></a>é¡¶ç‚¹ç€è‰²å™¨</h3><p>é¡¶ç‚¹ç€è‰²å™¨æ¯”è¾ƒç®€å•ï¼Œå’Œä¹‹å‰çš„åŒºåˆ«æ¯”è¾ƒå¤§çš„æ˜¯ï¼ŒæŠŠè®¡ç®—é¢œè‰²å…‰ç…§éƒ¨åˆ†ç§»åˆ°äº†ç‰‡å…ƒç€è‰²å™¨ï¼Œè¿™æ ·å¯ä»¥å®ç°é€ç‰‡å…ƒå…‰ç…§ï¼Œæ•ˆæœä¼šæ›´åŠ é€¼çœŸå’Œè‡ªç„¶ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">attribute vec4 a_Position;<span class="comment">//é¡¶ç‚¹ä½ç½®</span></span><br><span class="line">attribute vec4 a_Color;<span class="comment">//é¡¶ç‚¹é¢œè‰²</span></span><br><span class="line">attribute vec4 a_Scolor;<span class="comment">//é¡¶ç‚¹é«˜å…‰é¢œè‰²</span></span><br><span class="line">attribute vec4 a_Normal;<span class="comment">//æ³•å‘é‡</span></span><br><span class="line">uniform mat4 u_MvpMatrix;<span class="comment">//mvpçŸ©é˜µ</span></span><br><span class="line">uniform mat4 u_ModelMatrix;<span class="comment">//æ¨¡å‹çŸ©é˜µ</span></span><br><span class="line">uniform mat4 u_NormalMatrix;</span><br><span class="line">varying vec4 v_Color;</span><br><span class="line">varying vec3 v_Normal;</span><br><span class="line">varying vec3 v_Position;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    gl_Position = u_MvpMatrix * a_Position;</span><br><span class="line">    <span class="comment">// è®¡ç®—é¡¶ç‚¹åœ¨ä¸–ç•Œåæ ‡ç³»çš„ä½ç½®</span></span><br><span class="line">    v_Position = vec3(u_ModelMatrix * a_Position);</span><br><span class="line">    <span class="comment">// è®¡ç®—å˜æ¢åçš„æ³•å‘é‡å¹¶å½’ä¸€åŒ–</span></span><br><span class="line">    v_Normal = normalize(vec3(u_NormalMatrix * a_Normal));</span><br><span class="line">    v_Color = a_Color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…‰ç…§"><a href="#å…‰ç…§" class="headerlink" title="å…‰ç…§"></a>å…‰ç…§</h2><p>å…‰ç…§ç›¸å…³çš„è®¡ç®—ä¸»è¦åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ï¼Œé¦–å…ˆç§‘æ™®ä¸€ä¸‹å…‰ç…§çš„ç›¸å…³ä¿¡æ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç‰©ä½“å‘ˆç°å‡ºé¢œè‰²äº®åº¦å°±æ˜¯è¡¨é¢çš„åå°„å…‰å¯¼è‡´ï¼Œè®¡ç®—åå°„å…‰å…¬å¼å¦‚ä¸‹ï¼š</span><br><span class="line">&lt;è¡¨é¢çš„åå°„å…‰é¢œè‰²&gt; &#x3D; &lt;æ¼«åå°„å…‰é¢œè‰²&gt; + &lt;ç¯å¢ƒåå°„å…‰é¢œè‰²&gt; + &lt;é•œé¢åå°„å…‰é¢œè‰²&gt;</span><br><span class="line"></span><br><span class="line">1. å…¶ä¸­æ¼«åå°„å…¬å¼å¦‚ä¸‹ï¼š</span><br><span class="line">&lt;æ¼«åå°„å…‰é¢œè‰²&gt; &#x3D; &lt;å…¥å°„å…‰é¢œè‰²&gt; * &lt;è¡¨é¢åŸºåº•è‰²&gt; * &lt;å…‰çº¿å…¥å°„è§’åº¦&gt;</span><br><span class="line"></span><br><span class="line">å…‰çº¿å…¥å°„è§’åº¦å¯ä»¥ç”±å…‰çº¿æ–¹å‘å’Œè¡¨é¢çš„æ³•çº¿è¿›è¡Œç‚¹ç§¯æ±‚å¾—ï¼š</span><br><span class="line">&lt;å…‰çº¿å…¥å°„è§’åº¦&gt; &#x3D; &lt;å…‰çº¿æ–¹å‘&gt; * &lt;æ³•çº¿æ–¹å‘&gt;</span><br><span class="line"></span><br><span class="line">æœ€åçš„æ¼«åå°„å…¬å¼å¦‚ä¸‹ï¼š</span><br><span class="line">&lt;æ¼«åå°„å…‰é¢œè‰²&gt; &#x3D; &lt;å…¥å°„å…‰é¢œè‰²&gt; * &lt;è¡¨é¢åŸºåº•è‰²&gt; * (&lt;å…‰çº¿æ–¹å‘&gt; * &lt;æ³•çº¿æ–¹å‘&gt;)</span><br><span class="line"></span><br><span class="line">2. ç¯å¢ƒåå°„å…‰é¢œè‰²æ ¹æ®å¦‚ä¸‹å…¬å¼å¾—åˆ°ï¼š</span><br><span class="line">&lt;ç¯å¢ƒåå°„å…‰é¢œè‰²&gt; &#x3D; &lt;å…¥å°„å…‰é¢œè‰²&gt; * &lt;è¡¨é¢åŸºåº•è‰²&gt;</span><br><span class="line"></span><br><span class="line">3. é•œé¢ï¼ˆé«˜å…‰ï¼‰åå°„å…‰é¢œè‰²å…¬å¼ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯å†¯æ°åå°„åŸç†</span><br><span class="line">&lt;é•œé¢åå°„å…‰é¢œè‰²&gt; &#x3D; &lt;é«˜å…‰é¢œè‰²&gt; * &lt;é•œé¢åå°„äº®åº¦æƒé‡&gt; </span><br><span class="line"></span><br><span class="line">å…¶ä¸­é•œé¢åå°„äº®åº¦æƒé‡åˆå¦‚ä¸‹</span><br><span class="line">&lt;é•œé¢åå°„äº®åº¦æƒé‡&gt; &#x3D; (&lt;è§‚å¯Ÿæ–¹å‘çš„å•ä½å‘é‡&gt; * &lt;å…¥å°„å…‰åå°„æ–¹å‘&gt;) ^ å…‰æ³½åº¦</span><br></pre></td></tr></table></figure>
<h3 id="ç‰‡å…ƒç€è‰²å™¨"><a href="#ç‰‡å…ƒç€è‰²å™¨" class="headerlink" title="ç‰‡å…ƒç€è‰²å™¨"></a>ç‰‡å…ƒç€è‰²å™¨</h3><p>ç€è‰²å™¨ä»£ç å°±æ˜¯å¯¹ä¸Šé¢å…¬å¼å†…å®¹çš„æ¼”ç»</p>
<figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec3</span> u_LightPosition;<span class="comment">//å…‰æºä½ç½®</span></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec3</span> u_diffuseColor;<span class="comment">//æ¼«åå°„å…‰é¢œè‰²</span></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec3</span> u_AmbientColor;<span class="comment">//ç¯å¢ƒå…‰é¢œè‰²</span></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec3</span> u_specularColor;<span class="comment">//é•œé¢åå°„å…‰é¢œè‰²</span></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_MaterialShininess;<span class="comment">// é•œé¢åå°„å…‰æ³½åº¦</span></span><br><span class="line"><span class="keyword">varying</span> <span class="type">vec3</span> v_Normal;<span class="comment">//æ³•å‘é‡</span></span><br><span class="line"><span class="keyword">varying</span> <span class="type">vec3</span> v_Position;<span class="comment">//é¡¶ç‚¹ä½ç½®</span></span><br><span class="line"><span class="keyword">varying</span> <span class="type">vec4</span> v_Color;<span class="comment">//é¡¶ç‚¹é¢œè‰²</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line">    <span class="comment">// å¯¹æ³•çº¿å½’ä¸€åŒ–</span></span><br><span class="line">    <span class="type">vec3</span> normal = <span class="built_in">normalize</span>(v_Normal);</span><br><span class="line">    <span class="comment">// è®¡ç®—å…‰çº¿æ–¹å‘(å…‰æºä½ç½®-é¡¶ç‚¹ä½ç½®)å¹¶å½’ä¸€åŒ–</span></span><br><span class="line">    <span class="type">vec3</span> lightDirection = <span class="built_in">normalize</span>(u_LightPosition - v_Position);</span><br><span class="line">    <span class="comment">// è®¡ç®—å…‰çº¿æ–¹å‘å’Œæ³•å‘é‡ç‚¹ç§¯</span></span><br><span class="line">    <span class="type">float</span> nDotL = <span class="built_in">max</span>(<span class="built_in">dot</span>(lightDirection, normal), <span class="number">0.0</span>);</span><br><span class="line">    <span class="comment">// æ¼«åå°„å…‰äº®åº¦</span></span><br><span class="line">    <span class="type">vec3</span> diffuse = u_diffuseColor  * nDotL * v_Color.rgb;</span><br><span class="line">    <span class="comment">// ç¯å¢ƒå…‰äº®åº¦</span></span><br><span class="line">    <span class="type">vec3</span> ambient = u_AmbientColor * v_Color.rgb;</span><br><span class="line">    <span class="comment">// è§‚å¯Ÿæ–¹å‘çš„å•ä½å‘é‡V</span></span><br><span class="line">    <span class="type">vec3</span> eyeDirection = <span class="built_in">normalize</span>(-v_Position);</span><br><span class="line">    <span class="comment">// åå°„æ–¹å‘</span></span><br><span class="line">    <span class="type">vec3</span> reflectionDirection = <span class="built_in">reflect</span>(-lightDirection, normal);</span><br><span class="line">    <span class="comment">// é•œé¢åå°„äº®åº¦æƒé‡</span></span><br><span class="line">    <span class="type">float</span> specularLightWeighting = <span class="built_in">pow</span>(<span class="built_in">max</span>(<span class="built_in">dot</span>(reflectionDirection, eyeDirection), <span class="number">0.0</span>), u_MaterialShininess);</span><br><span class="line">    <span class="comment">// é•œé¢é«˜å…‰äº®åº¦</span></span><br><span class="line">    <span class="type">vec3</span> specular =  lightColor.rgb * specularLightWeighting ;</span><br><span class="line">    <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(ambient + diffuse + specular, v_Color.a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡å‹å˜æ¢"><a href="#æ¨¡å‹å˜æ¢" class="headerlink" title="æ¨¡å‹å˜æ¢"></a>æ¨¡å‹å˜æ¢</h2><p>è¿™é‡Œå…ˆè®¾ç½®å…‰ç…§ç›¸å…³çš„åˆå§‹æ¡ä»¶ï¼Œç„¶åæ˜¯mvpçŸ©é˜µå˜æ¢å’Œæ³•å‘é‡çŸ©é˜µç›¸å…³çš„è®¡ç®—ï¼Œå…·ä½“çŸ¥è¯†ç‚¹å¯å‚è€ƒä¹‹å‰çš„æ–‡ç« <em><a href="https://jeff_zhong.gitee.io/blog/2017/11/14/webgl2/">WebGLå­¦ä¹ (2) - 3Dåœºæ™¯</a></em></p>
<p>è¦æ³¨æ„çš„æ˜¯é€†è½¬ç½®çŸ©é˜µï¼Œä¸»è¦ç”¨äºè®¡ç®—æ¨¡å‹å˜æ¢ä¹‹åçš„æ³•å‘é‡ï¼Œæœ‰äº†å˜æ¢åçš„æ³•å‘é‡æ‰èƒ½æ­£ç¡®è®¡ç®—å…‰ç…§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æ±‚é€†è½¬ç½®çŸ©é˜µæ­¥éª¤</span><br><span class="line">1.æ±‚åŸæ¨¡å‹çŸ©é˜µçš„é€†çŸ©é˜µ</span><br><span class="line">2.å°†é€†çŸ©é˜µè½¬ç½®</span><br><span class="line"></span><br><span class="line">&lt;å˜æ¢åæ³•å‘é‡&gt; &#x3D; &lt;é€†è½¬ç½®çŸ©é˜µ&gt; * &lt;å˜æ¢å‰æ³•å‘é‡&gt;</span><br></pre></td></tr></table></figure>

<p>ç»™ç€è‰²å™¨å˜é‡èµ‹å€¼ç„¶åç»˜åˆ¶å‡ºæ¨¡å‹ï¼Œæœ€åè°ƒç”¨requestAnimationFrameä¸æ–­æ‰§è¡ŒåŠ¨ç”»ã€‚çŸ©é˜µçš„æ—‹è½¬éƒ¨åˆ†å¯ç»“åˆä¸‹é¢çš„keydownäº‹ä»¶è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…‰çº¿æ–¹å‘</span></span><br><span class="line">    gl.uniform3f(u_LightPosition, <span class="number">0.0</span>, <span class="number">2.0</span>, <span class="number">12.0</span>);</span><br><span class="line">    <span class="comment">// æ¼«åå°„å…‰ç…§é¢œè‰²</span></span><br><span class="line">    gl.uniform3f(u_diffuseColor, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>);</span><br><span class="line">    <span class="comment">// è®¾ç½®ç¯å¢ƒå…‰é¢œè‰²</span></span><br><span class="line">    gl.uniform3f(u_AmbientColor, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">    <span class="comment">// é•œé¢åå°„å…‰æ³½åº¦</span></span><br><span class="line">    gl.uniform1f(u_MaterialShininess, <span class="number">30.0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> modelMatrix = <span class="keyword">new</span> Matrix4();</span><br><span class="line">    <span class="keyword">var</span> mvpMatrix = <span class="keyword">new</span> Matrix4();</span><br><span class="line">    <span class="keyword">var</span> normalMatrix = <span class="keyword">new</span> Matrix4();</span><br><span class="line">    <span class="keyword">var</span> n = drawingInfo.indices.length;</span><br><span class="line"></span><br><span class="line">    (<span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// æ¨¡å‹çŸ©é˜µ</span></span><br><span class="line">        <span class="keyword">if</span> (notMan) &#123;</span><br><span class="line">            angleY += <span class="number">0.5</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        modelMatrix.setRotate(angleY % <span class="number">360</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>); <span class="comment">// ç»•yè½´æ—‹è½¬</span></span><br><span class="line">        modelMatrix.rotate(angleX % <span class="number">360</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">// ç»•xè½´æ—‹è½¬</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> eyeY = viewLEN * <span class="built_in">Math</span>.sin((viewAngleY * <span class="built_in">Math</span>.PI) / <span class="number">180</span>),</span><br><span class="line">            len = viewLEN * <span class="built_in">Math</span>.cos((viewAngleY * <span class="built_in">Math</span>.PI) / <span class="number">180</span>),</span><br><span class="line">            eyeX = len * <span class="built_in">Math</span>.sin((viewAngleX * <span class="built_in">Math</span>.PI) / <span class="number">180</span>),</span><br><span class="line">            eyeZ = len * <span class="built_in">Math</span>.cos((viewAngleX * <span class="built_in">Math</span>.PI) / <span class="number">180</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è§†ç‚¹æŠ•å½±</span></span><br><span class="line">        mvpMatrix.setPerspective(<span class="number">30</span>, canvas.width / canvas.height, <span class="number">1</span>, <span class="number">300</span>);</span><br><span class="line">        mvpMatrix.lookAt( eyeX, eyeY, eyeZ, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, viewAngleY &gt; <span class="number">90</span> || viewAngleY &lt; <span class="number">-90</span> ? <span class="number">-1</span> : <span class="number">1</span>, <span class="number">0</span> );</span><br><span class="line">        mvpMatrix.multiply(modelMatrix);</span><br><span class="line">        <span class="comment">// æ ¹æ®æ¨¡å‹çŸ©é˜µè®¡ç®—ç”¨æ¥å˜æ¢æ³•å‘é‡çš„çŸ©é˜µ</span></span><br><span class="line">        normalMatrix.setInverseOf(modelMatrix);</span><br><span class="line">        normalMatrix.transpose();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ¨¡å‹çŸ©é˜µ</span></span><br><span class="line">        gl.uniformMatrix4fv(u_ModelMatrix, <span class="literal">false</span>, modelMatrix.elements);</span><br><span class="line">        <span class="comment">// mvpçŸ©é˜µ</span></span><br><span class="line">        gl.uniformMatrix4fv(u_MvpMatrix, <span class="literal">false</span>, mvpMatrix.elements);</span><br><span class="line">        <span class="comment">// æ³•å‘é‡çŸ©é˜µ</span></span><br><span class="line">        gl.uniformMatrix4fv(u_NormalMatrix, <span class="literal">false</span>, normalMatrix.elements);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ¸…å±|æ¸…æ·±åº¦ç¼“å†²</span></span><br><span class="line">        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¹æ®é¡¶ç‚¹ç´¢å¼•ç»˜åˆ¶å›¾å½¢(å›¾å½¢ç±»å‹ï¼Œç»˜åˆ¶é¡¶ç‚¹ä¸ªæ•°ï¼Œé¡¶ç‚¹ç´¢å¼•æ•°æ®ç±»å‹ï¼Œé¡¶ç‚¹ç´¢å¼•ä¸­å¼€å§‹ç»˜åˆ¶çš„ä½ç½®)</span></span><br><span class="line">        gl.drawElements(gl.TRIANGLES, n, gl.UNSIGNED_SHORT, <span class="number">0</span>);</span><br><span class="line">        requestAnimationFrame(animate);</span><br><span class="line">    &#125;)();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äº‹ä»¶å¤„ç†"><a href="#äº‹ä»¶å¤„ç†" class="headerlink" title="äº‹ä»¶å¤„ç†"></a>äº‹ä»¶å¤„ç†</h2><p>+/- é”®å®ç°æ”¾å¤§/ç¼©å°åœºæ™¯çš„åŠŸèƒ½ï¼›WSADé”®å®ç°æ¨¡å‹çš„æ—‹è½¬ï¼Œä¹Ÿå°±æ˜¯å®ç°ç»•xè½´å’Œyè½´æ—‹è½¬ï¼›ä¸Šä¸‹å·¦å³æ–¹å‘é”®å®ç°çš„æ˜¯è§†ç‚¹çš„æ—‹è½¬ã€‚çŸ©é˜µå˜æ¢çš„ç›¸å…³å®ç°å‚è€ƒä¸Šé¢ä»£ç çš„åŠ¨ç”»éƒ¨åˆ†ã€‚</p>
<p>æ¨¡å‹æ—‹è½¬å’Œè§†ç‚¹æ—‹è½¬çœ‹ç€å¾ˆç›¸ä¼¼ï¼Œå…¶å®åˆæœ‰ä¸åŒçš„ã€‚è§†ç‚¹çš„æ—‹è½¬æ˜¯æ•´ä¸ªåœºæ™¯æ¯”å¦‚å…‰ç…§æ¨¡å‹ç­‰éƒ½æ˜¯è·Ÿç€å˜åŒ–çš„ï¼Œå¦‚æœä»¥åœºæ™¯åšå‚ç…§ç‰©ï¼Œå®ƒå°±ç›¸å½“äºäººæ”¹å˜è§‚å¯Ÿä½ç½®è§‚çœ‹ç‰©ä½“ã€‚è€Œæ¨¡å‹æ—‹è½¬å‘¢ï¼Œå®ƒåªæ—‹è½¬æ¨¡å‹è‡ªèº«ï¼Œå¤–éƒ¨çš„å…‰ç…§å’Œåœºæ™¯éƒ½æ˜¯ä¸å˜çš„ï¼Œä»¥åœºæ™¯åšå‚ç…§ç‰©ï¼Œç›¸å½“äºäººåœ¨åŒä¸€ä½ç½®è§‚çœ‹æ¨¡å‹åœ¨è¿åŠ¨ã€‚ä»demoçš„å…‰ç…§å¯ä»¥çœ‹å‡ºä¸¤ç§æ–¹å¼çš„åŒºåˆ«ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener( <span class="string">"keydown"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">65</span>, <span class="number">58</span>, <span class="number">83</span>, <span class="number">87</span>, <span class="number">40</span>].indexOf(e.keyCode) &gt; <span class="number">-1</span>) notMan = <span class="literal">false</span>; </span><br><span class="line">    <span class="keyword">switch</span> (e.keyCode) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">38</span>: <span class="comment">//up</span></span><br><span class="line">            viewAngleY -= <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (viewAngleY &lt; <span class="number">-270</span>) viewAngleY += <span class="number">360</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">40</span>: <span class="comment">//down</span></span><br><span class="line">            viewAngleY += <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (viewAngleY &gt; <span class="number">270</span>) viewAngleY -= <span class="number">360</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">37</span>: <span class="comment">//left</span></span><br><span class="line">            viewAngleX += <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">39</span>: <span class="comment">//right</span></span><br><span class="line">            viewAngleX -= <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">87</span>: <span class="comment">//w</span></span><br><span class="line">            angleX -= <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">83</span>: <span class="comment">//s</span></span><br><span class="line">            angleX += <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">65</span>: <span class="comment">//a</span></span><br><span class="line">            angleY += <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">68</span>: <span class="comment">//d</span></span><br><span class="line">            angleY -= <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">187</span>: <span class="comment">//zoom in</span></span><br><span class="line">            <span class="keyword">if</span> (viewLEN &gt; <span class="number">6</span>) viewLEN--;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">189</span>: <span class="comment">//zoom out</span></span><br><span class="line">            <span class="keyword">if</span> (viewLEN &lt; <span class="number">30</span>) viewLEN++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="literal">false</span> );</span><br></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ€åï¼Œä¸ªäººæ„Ÿè§‰å»ºç«‹3Dæ¨¡å‹è¿˜æ˜¯æŒºè´¹æ—¶é—´ï¼Œéœ€è¦èŠ±å¿ƒæœºæ…¢æ…¢è°ƒæ•´ï¼Œæ‰èƒ½åšå‡ºæ¯”è¾ƒå®Œç¾çš„æ¨¡å‹ã€‚</p>
</div>
    	
		<div class="post-footer">
			<div class="tags">
				<i class="icon-tags"></i> 
				
					
					
						
							<a href="/blog/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
						
					
						
							<a href="/blog/tags/js/">js</a>
						
					
						
							<a href="/blog/tags/webGL/">webGL</a>
						
					
				
			</div>
			<a class="share" href="javascript:;" data-url="/blog/2017/12/26/webglspitfire/" data-desc="
ç›¸ä¿¡å¾ˆå¤šäººæ˜¯ä»¥åˆ›å»ºé€¼çœŸé…·ç‚«çš„ä¸‰ç»´æ•ˆæœä¸ºç›®æ ‡è€Œå­¦ä¹ webGLçš„å§ï¼Œé¦–å…ˆæˆ‘å°±æ˜¯ğŸ˜‚ã€‚æˆ‘æŒæ¡äº†è¶³å¤Ÿ..." data-type="share" title="share"><i class="icon-share"></i></a>
		</div>
	</div>
</article>
</div>
<nav class="pagination clearfix">
  
    
      
        <a href="/blog/2018/01/12/webglpolygons/" class="prev post-prev"> <i class="icon-leftarrow"></i> WebGLå¤šæ¨¡å‹å…‰ç…§ç»¼åˆå®ä¾‹</a>
      

      
        <a href="/blog/2017/12/01/netgrab/" class="next post-next"> NodeJSç½‘ç»œçˆ¬è™« <i class="icon-rightarrow"></i></a>
      
    
  
</nav>

<div class="wxshare-popup">
    <a class="close" href="javascript:;"></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <div id="qrcode" class="wx-qrcode"></div>
</div>

    
    <footer class="footer">
<p class="theme">
	Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/edwardzhong/simply.git" target="_blank" rel="noopener">simply</a>
</p>
<p class="copy">Copyright &copy; 2025 Jeff Zhong</p>
</footer>
    <div class="top-bottom">
      <div class="to-top hide" title="to top"><i class="icon-up"></i></div>
      <div class="to-bottom hide" title="to bottom"><i class="icon-down"></i></div>
    </div>
    </div>

  </div>
<input type="hidden" name="isPost" id="isPost" value="true">
<i id="barBtn" class="icon icon-menu"></i>
<div id="payMe" class="payme">
    <i class="icon icon-cancel"></i>
    <p class="pay-title">ç»™æˆ‘çš„æ—©é¤åŠ ä¸ªè›‹å§ ğŸ˜Š</p>
    <div>
      <img src="/images/weixinpay.jpg" alt="weixinpay">
      <img src="/images/alipay.jpg" alt="alipay" style="display:none;">
    </div>
    <div class="pay-selects">
        <input type="radio" name="pay" id="weixinpay" checked="checked"><label for="weixinpay"> å¾®ä¿¡ </label>&nbsp;&nbsp;
        <input type="radio" name="pay" id="alipay"><label for="alipay"> æ”¯ä»˜å® </label>
    </div>
</div>

  
  
    <script src="/blog/lib/jquery-2.2.3.min.js"></script>
  
    <script src="/blog/lib/qrcode.min.js"></script>
  
    <script src="/blog/js/index.js"></script>
  

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</body>
</html>
