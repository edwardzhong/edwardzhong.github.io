<!doctype html>
<html lang="zh-CN">









<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <!-- ä¼˜å…ˆä½¿ç”¨ IE æœ€æ–°ç‰ˆæœ¬å’Œ Chrome -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <!-- ä¸ºç§»åŠ¨è®¾å¤‡æ·»åŠ  viewport -->
  <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <!-- æ·»åŠ åˆ°ä¸»å±åçš„æ ‡é¢˜ï¼ˆiOS 6 æ–°å¢ï¼‰ -->
  <meta name="apple-mobile-web-app-title" content="Haskellå­¦ä¹ -functor - Jeff's world">
  <!-- æ˜¯å¦å¯ç”¨ WebApp å…¨å±æ¨¡å¼ï¼Œåˆ é™¤è‹¹æœé»˜è®¤çš„å·¥å…·æ å’Œèœå•æ  -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <!-- è®¾ç½®è‹¹æœå·¥å…·æ é¢œè‰² -->
  <meta name="apple-mobile-web-app-status-bar-style" content = "black" />
  <!-- æ·»åŠ æ™ºèƒ½ App å¹¿å‘Šæ¡ Smart App Bannerï¼ˆiOS 6+ Safariï¼‰ -->
  <!-- <meta name = "apple-itunes-app" content = "app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL"> -->
  <!-- å¿½ç•¥é¡µé¢ä¸­çš„æ•°å­—è¯†åˆ«ä¸ºç”µè¯ï¼Œå¿½ç•¥emailè¯†åˆ« -->
  <meta name="format-detection" content = "telphone=no, email=no" />
  <!--ä¸‹é¢ä¸‰ä¸ªæ˜¯æ¸…é™¤ç¼“å­˜ å¾®ä¿¡æµè§ˆå™¨ç¼“å­˜ä¸¥é‡åˆæ— åˆ·æ–°ï¼›è¿™ä¸ªæ–¹æ³•è°ƒè¯•çš„æ—¶å€™å¾ˆæ–¹ä¾¿-->
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta http-equiv="Expires" content="0">
  
  <link rel="dns-prefetch" href="https://jeff_zhong.gitee.io/blog">
  <link rel="icon shortcut" type="image/ico" href="/favicon.ico">
  <meta name="author" content="Jeff Zhong">
  <meta name="description" content="it's a blog by hexo">
  <meta name="keywords" content="hexo theme">
  <title >Haskellå­¦ä¹ -functor - Jeff's world</title>
    <!-- The Open Graph protocol -->
  <meta property="og:url" content="https://jeff_zhong.gitee.io/blog">
  <meta property="og:type" content="blog">
  <meta property="og:title" content="Haskellå­¦ä¹ -functor - Jeff's world">
  <meta property="og:description" content="it's a blog by hexo">
  
    
    
      <link rel="stylesheet" href="./lib/fontello/fontello.css">
    
      <link rel="stylesheet" href="./lib/reboto/roboto.css">
    
      <link rel="stylesheet" href="./css/index.css">
    
  
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?5255e97b442092b8e1a219e6a48a0d42";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/blog/atom.xml" title="Jeff's world" type="application/atom+xml">
</head>
<body>
<header class="header">
  <div class="top"></div>
  <h2>Jeff's World</h2>
  <h3>Things that I'm interested in</h3>
  <div class="menu">
  
  
  
      <a  href="/blog/" title="ä¸» é¡µ">
        <i class="icon-home"></i>
        <span>ä¸» é¡µ</span>
      </a>
  
      <a  href="https://jeff_zhong.gitee.io/demo/" title="Demo">
        <i class="icon-page"></i>
        <span>Demo</span>
      </a>
  
      <a  data-tag="search"  href="javascript:;" title="æœ ç´¢">
        <i class="icon-search"></i>
        <span>æœ ç´¢</span>
      </a>
  
  </div>
  <div class="state">
  
    <a href="/blog/archives">48<br>æ–‡ ç« </a><a href="/blog/categories">2<br>åˆ† ç±»</a><a href="/blog/tags">64<br>æ ‡ ç­¾</a>
  </div>
  <div class="social">
  
  
  
      <a href="https://github.com/edwardzhong" target="_blank" rel="noopener" title="Github"><i class="icon-github"></i></a>
  
      <a href="https://twitter.com/JianfengEdward" target="_blank" rel="noopener" title="Twitter"><i class="icon-twitter"></i></a>
  
      <a href="https://www.facebook.com/jianfeng.edward" target="_blank" rel="noopener" title="Facebook"><i class="icon-facebook"></i></a>
  
      <a href="http://weibo.com/1593251850" target="_blank" rel="noopener" title="Weibo"><i class="icon-weibo"></i></a>
  
      <a href="/blog/atom.xml" title="Rss"><i class="icon-rss"></i></a>
  
  </div>
  <div id="payBtn" class="pay-icon" title="è°¢è°¢æ‚¨çš„èµèµ">èµ</div>
</header>
  <div class="container">
    <div class="main">
    
        
<div class="post-list">
	<article class="post" style="animation:listshow 0.6s ease-out both 0.30000000000000004s">
    
    
        
    
	
	<a href="javascript:;">
        <div class="post-banner" style="background: url(/images/banner2.jpg)  center top / 100% no-repeat">
    		<h3 class="post-title">Haskellå­¦ä¹ -functor</h3>
    	</div>
	</a>
	<div class="post-inner">
	
    	<div class="post-info">
    		<time><i class="icon-calendar"></i> 2018/08/15 21:27:00</time>
    		<span class="category">
    		
    			
    			<i class="icon-book"></i>
    			
                    
                        <a href="/blog/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a>
                    
    			
    		
    		</span>
    	</div>
    	<!-- <p><p>ä»€ä¹ˆæ˜¯Functorfunctor å°±æ˜¯å¯ä»¥æ‰§è¡Œmapæ“ä½œçš„å¯¹è±¡ï¼Œfunctorå°±åƒæ˜¯é™„åŠ äº†è¯­ä¹‰çš„è¡¨è¾¾å¼ï¼Œå¯ä»¥ç”¨ç›’å­è¿›è¡Œæ¯”å–»ã€‚functor çš„å®šä¹‰å¯ä»¥è¿™æ ·ç†è§£ï¼šç»™å‡ºaæ˜ å°„åˆ°bçš„å‡½æ•°å’Œè£…äº†açš„â€¦</p>
</p> -->
    	
    		<div class="post-content"><!-- åŸæ–‡åœ°å€ï¼š[Haskellå­¦ä¹ -functor](http://02s949.coding-pages.com/2018/08/15/haskellc/) -->
<h2 id="ä»€ä¹ˆæ˜¯Functor"><a href="#ä»€ä¹ˆæ˜¯Functor" class="headerlink" title="ä»€ä¹ˆæ˜¯Functor"></a>ä»€ä¹ˆæ˜¯Functor</h2><p><strong>functor</strong> å°±æ˜¯å¯ä»¥æ‰§è¡Œmapæ“ä½œçš„å¯¹è±¡ï¼Œfunctorå°±åƒæ˜¯é™„åŠ äº†è¯­ä¹‰çš„è¡¨è¾¾å¼ï¼Œå¯ä»¥ç”¨ç›’å­è¿›è¡Œæ¯”å–»ã€‚<strong>functor</strong> çš„å®šä¹‰å¯ä»¥è¿™æ ·ç†è§£ï¼šç»™å‡ºaæ˜ å°„åˆ°bçš„å‡½æ•°å’Œè£…äº†açš„ç›’å­ï¼Œç»“æœä¼šè¿”å›è£…äº†bçš„ç›’å­ã€‚<strong>fmap</strong> å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ¥å—ä¸€ä¸ªfunction å’Œä¸€ä¸ª <strong>functor</strong> çš„å‡½æ•°ï¼Œå®ƒæŠŠfunction åº”ç”¨åˆ° <strong>functor</strong> çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼ˆæ˜ å°„ï¼‰ã€‚</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Functorçš„å®šä¹‰</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Functor</span> f <span class="keyword">where</span></span></span><br><span class="line">    fmap :: (a -&gt; b) -&gt; f a -&gt; f b</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>æŸä¸ªç±»å‹è¦èƒ½è¿›è¡Œæ˜ å°„æ“ä½œ(map over)ï¼Œå°±å¿…é¡»ç»§æ‰¿FunctoråŸºç±»ï¼Œå¹¶å®ç°å…¶ä¸­çš„fmapå‡½æ•°ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å‡ ç§é»˜è®¤çš„Functorå½¢æ€ï¼š</p>
<ol>
<li><p><strong>åˆ—è¡¨list</strong>ï¼Œéå¸¸å¥½ç†è§£ï¼Œæ“ä½œåˆ—è¡¨æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨mapå‡½æ•°ï¼Œå®ƒå…¶å®å°±æ˜¯fmapé’ˆå¯¹åˆ—è¡¨çš„ä¸€ä¸ªå…·ä½“å®ä¾‹ï¼Œåœ¨listä¸­å®ƒä»¬æ˜¯ç­‰ä»·çš„ã€‚</p>
 <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä½œä¸ºfunctor çš„å®šä¹‰ï¼š</span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> [] <span class="keyword">where</span></span></span><br><span class="line">    fmap = map</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å®ä¾‹</span></span><br><span class="line"><span class="title">fmap</span> (*<span class="number">2</span>) [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">&gt; [<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>]</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Maybe</strong>ï¼Œå®ƒæ˜¯haskellä¸­ä½¿ç”¨å¾ˆå¹¿æ³›çš„æ•°æ®ç±»å‹ï¼Œå®ƒæœ‰ <strong>Just å€¼</strong> å’Œ <strong>Nothing</strong> ä¸¤ç§æƒ…å†µï¼Œåˆ†åˆ«ç”¨äºè¡¨ç¤ºæˆåŠŸå’Œå¤±è´¥çš„æƒ…å†µã€‚</p>
 <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Maybe çš„ functor å®šä¹‰ï¼š</span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    fmap f (<span class="type">Just</span> x) = <span class="type">Just</span> (f x)</span><br><span class="line">    fmap f <span class="type">Nothing</span> = <span class="type">Nothing</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å®ä¾‹</span></span><br><span class="line"><span class="title">fmap</span> (*<span class="number">2</span>) (<span class="type">Just</span> <span class="number">1</span>)</span><br><span class="line">&gt; <span class="type">Just</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="title">fmap</span> (*<span class="number">2</span>) (<span class="type">Nothing</span>)</span><br><span class="line">&gt; <span class="type">Nothing</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>IO</strong>ï¼Œè¾“å…¥ä¸è¾“å‡ºï¼Œæ¯”å¦‚è¯»å–é”®ç›˜è¾“å…¥ï¼Œæ‰“å°å­—ç¬¦ä¸²ç­‰</p>
 <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- IO çš„ Functor å®šä¹‰</span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> <span class="type">IO</span> <span class="keyword">where</span></span></span><br><span class="line">    fmap f action = <span class="keyword">do</span></span><br><span class="line">          result &lt;- action</span><br><span class="line">          return (f result)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å®ä¾‹</span></span><br><span class="line"><span class="title">fmap</span> (<span class="string">"hello! "</span>++) getLine</span><br><span class="line"><span class="title">jeff</span> <span class="comment">-- è¾“å…¥åå­—ï¼Œæ‰“å°æ—¶æ·»åŠ â€œhelloâ€</span></span><br><span class="line">&gt; <span class="string">"hello! jeff"</span></span><br></pre></td></tr></table></figure>


</li>
</ol>
<h2 id="Functorçš„-gt-r-å½¢æ€"><a href="#Functorçš„-gt-r-å½¢æ€" class="headerlink" title="Functorçš„ (-&gt;) r  å½¢æ€"></a>Functorçš„ (-&gt;) r  å½¢æ€</h2><p>(-&gt;) r å…¶å®è¡¨ç¤ºçš„æ˜¯å‡½æ•°ç»“åˆï¼Œä¹Ÿå°±æ˜¯ç­‰ä»·äº <strong>(.)</strong></p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä¸‹é¢ä¸¤ä¸ªå®šä¹‰æ˜¯ç­‰ä»·çš„ï¼Œä¹Ÿå°±æ˜¯ (-&gt;) r å½¢å¼ä¸‹çš„ Functor å…¶å®ç­‰ä»·äº ç»“åˆå¾‹</span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((-&gt;) r) <span class="keyword">where</span></span></span><br><span class="line">    fmap f g = (\x -&gt; f (g x))</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((-&gt;) r) <span class="keyword">where</span></span></span><br><span class="line">    fmap = (.)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å®ä¾‹</span></span><br><span class="line"><span class="title">fmap</span> (*<span class="number">3</span>) (+<span class="number">100</span>) <span class="number">1</span></span><br><span class="line">&gt; <span class="number">303</span></span><br><span class="line"></span><br><span class="line">(*<span class="number">3</span>) . (+<span class="number">100</span>)  $ <span class="number">1</span></span><br><span class="line">&gt; <span class="number">303</span></span><br></pre></td></tr></table></figure>

<h2 id="functor-law"><a href="#functor-law" class="headerlink" title="functor law"></a>functor law</h2><p>å¦‚æœæŸä¸ªç±»å‹éµå®ˆè¿™ä¸¤ä¸ªå®šå¾‹ï¼Œé‚£ä¹ˆå®ƒä¸å…¶ä»–Functorå¯¹äºæ˜ å°„æ–¹é¢å°±å…·æœ‰ç›¸åŒçš„æ€§è´¨ã€‚</p>
<ol>
<li><p><strong>fmap id = id</strong><br>å¦‚æœæˆ‘ä»¬å¯¹ functor åš map idï¼Œé‚£å¾—åˆ°çš„æ–°çš„ functor åº”è¯¥è¦è·ŸåŸæ¥çš„ä¸€æ ·</p>
 <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">fmap</span> id (<span class="type">Just</span> <span class="number">3</span>) </span><br><span class="line">&gt; <span class="type">Just</span> <span class="number">3</span></span><br><span class="line"><span class="title">id</span> (<span class="type">Just</span> <span class="number">3</span>) </span><br><span class="line">&gt; <span class="type">Just</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>fmap (f . g) = fmap f . fmap g</strong> ä¹Ÿå°±æ˜¯ <strong>functor</strong> æ˜¯èƒ½åº”ç”¨äºå‡½æ•°ç»“åˆçš„ã€‚</p>
</li>
</ol>
<h2 id="Applicative-Functor"><a href="#Applicative-Functor" class="headerlink" title="Applicative Functor"></a>Applicative Functor</h2><p>ä¸ºä»€ä¹ˆéœ€è¦ <strong>Applicative Functor</strong>ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨å®ƒã€‚ä»Functorå®šä¹‰æˆ‘ä»¬çŸ¥é“ï¼Œfmapå‡½æ•°åªèƒ½æ˜ å°„å•ä¸ªç›’å­ï¼Œä½†å‡è®¾éœ€è¦æ˜ å°„ä¸¤ä¸ªä¸‰ä¸ªï¼Œç”šè‡³æ˜¯æ›´å¤šçš„ç›’å­å‘¢ï¼Ÿæˆ–è€…æ˜¯è¦å¤„ç†è¿”å›å€¼æ˜¯å‡½æ•°çš„ç›’å­å‘¢ï¼Ÿè€Œè¿™å°±æ˜¯<strong>Applicative Functor</strong> è¦å¤„ç†çš„æƒ…å†µã€‚</p>
<p>Applicative Functor<em>* å¯ä»¥çœ‹ä½œæ˜¯Functorçš„å¢åŠ ç‰ˆï¼Œä»å®šä¹‰å¯çŸ¥ï¼Œå®ƒä¸»è¦åŒ…æ‹¬pure å’Œ &lt;\</em>&gt;ä¸¤ä¸ªå‡½æ•°ã€‚</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Applicative Functor å®šä¹‰</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> (<span class="type">Functor</span> <span class="title">f</span>) =&gt; <span class="type">Applicative</span> f <span class="keyword">where</span></span></span><br><span class="line">    pure :: a -&gt; f a</span><br><span class="line">    (&lt;*&gt;) :: f (a -&gt; b) -&gt; f a -&gt; f b</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>pure :: a -&gt; f a</strong> æ„æ€å°±æ˜¯æŠŠæ™®é€šå€¼æ”¾åˆ°é»˜è®¤çš„context(è¯­ä¹‰)ä¸‹ã€‚æ¯”å¦‚å¦‚æœæ˜¯listï¼Œé‚£ä¹ˆå®ƒä»£è¡¨çš„å°±æ˜¯<strong>[ ]</strong> ï¼Œå¦‚æœæ˜¯Maybeï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ <strong>Just å€¼ / Nothing</strong>ã€‚</p>
</li>
<li><p>(<strong>&lt;*&gt;</strong>) æ¥å—ä¸€ä¸ªè£…æœ‰å‡½æ•°çš„ functor è·Ÿå¦ä¸€ä¸ª functor,  éå¸¸ç±»ä¼¼äºfmapï¼Œå®ƒå°±åƒåŠ å¼ºç‰ˆçš„ fmapã€‚ä»¥applicative style çš„æ–¹å¼æ¥ä½¿ç”¨ applicative functorsã€‚åƒæ˜¯ pure f &lt;*&gt; x &lt;*&gt; y &lt;*&gt; â€¦ è¿™ä¸ªå‡½æ•°å¯ä»¥åƒä»»æ„å¤šçš„å‚æ•°ã€‚</p>
  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä¸fmapç±»å‹çš„å¯¹æ¯”ï¼Œå¯ä»¥çœ‹å‡ºå‡½æ•° a -&gt; b è¢«è£…è¿›äº†ç›’å­ f ä¸­</span></span><br><span class="line">(&lt;*&gt;) :: f (a -&gt; b) -&gt; f a -&gt; f b</span><br><span class="line"><span class="title">fmap</span> :: (a -&gt; b) -&gt; f a -&gt; f b</span><br><span class="line"></span><br><span class="line"><span class="comment">-- &lt;*&gt; æ˜¯å·¦ç»“åˆçš„ï¼Œå› æ­¤ä»¥ä¸‹ä¸¤ä¸ªè¡¨è¾¾å¼æ˜¯ç›¸ç­‰çš„</span></span><br><span class="line"><span class="title">pure</span> (+) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> <span class="number">5</span> </span><br><span class="line">(pure (+) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">5</span>ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li><p>(<strong>&lt;$&gt;</strong>) æ˜¯<strong>applicative functor</strong> ä¸­å¦ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„ç¬¦å·ï¼Œå®ƒå…¶å®å°±æ˜¯ä¸­ç¼€ç‰ˆçš„fmapã€‚å› ä¸ºç»“åˆfmapå†™<strong>applicative functor</strong>æ›´åŠ æ–¹ä¾¿ã€‚</p>
  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">(&lt;$&gt;) :: (<span class="type">Functor</span> f) =&gt; (a -&gt; b) -&gt; f a -&gt; f b</span><br><span class="line"><span class="title">f</span> &lt;$&gt; x = fmap f x</span><br><span class="line"><span class="comment">-- ç”¨&lt;*&gt;å®ç°ç›¸åŒçš„åŠŸèƒ½</span></span><br><span class="line"><span class="title">pure</span> f &lt;*&gt; x = fmap f x</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>æ¥ç€çœ‹ä¸€ä¸‹å‡ ä¸ªé»˜è®¤çš„ <strong>applicative functor</strong>ï¼Œç»§æ‰¿Applicativeï¼Œå¿…é¡»å®ç° <strong>pure</strong> å’Œ (<strong>&lt;*&gt;</strong>) å‡½æ•°</p>
<ol>
<li><p><strong>Maybe ç±»å‹</strong></p>
 <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Maybe çš„ Applicative å®šä¹‰ï¼š</span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    pure = <span class="type">Just</span></span><br><span class="line">    <span class="type">Nothing</span> &lt;*&gt; _ = <span class="type">Nothing</span></span><br><span class="line">    (<span class="type">Just</span> f) &lt;*&gt; something = fmap f something</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å®ä¾‹</span></span><br><span class="line"><span class="title">pure</span> (+<span class="number">3</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">9</span></span><br><span class="line">&gt; <span class="type">Just</span> <span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="title">pure</span> (+) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line">&gt; <span class="type">Just</span> <span class="number">8</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>åˆ—è¡¨list</strong> ä¹Ÿæ˜¯ applicative functorï¼Œä»å®šä¹‰å¯ä»¥çœ‹å‡ºä½¿ç”¨listçš„Applicative styleå®Œå…¨å¯ä»¥å®ç° <strong>list comprehension</strong> çš„åŠŸèƒ½ã€‚æ‰€ä»¥ <strong>Applicative style</strong> å¯¹äº list è€Œè¨€æ˜¯å–ä»£æŸäº›ç±»å‹çš„ list comprehension çš„å¥½æ–¹å¼ã€‚</p>
 <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- list çš„å®šä¹‰</span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> [] <span class="keyword">where</span></span></span><br><span class="line">    pure x = [x]</span><br><span class="line">    fs &lt;*&gt; xs = [f x | f &lt;- fs, x &lt;- xs]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å®ä¾‹</span></span><br><span class="line">[(+<span class="number">3</span>),(*<span class="number">2</span>)] &lt;*&gt; [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">&gt; [<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">--ä¸‹é¢è¡¨è¾¾å¼å…·æœ‰ç›¸åŒçš„åŠŸèƒ½</span></span><br><span class="line">(*) &lt;$&gt; [<span class="number">2</span>,<span class="number">5</span>,<span class="number">10</span>] &lt;*&gt; [<span class="number">8</span>,<span class="number">10</span>,<span class="number">11</span>] <span class="comment">-- Applicative style</span></span><br><span class="line">[ x * y | x &lt;- [<span class="number">2</span>,<span class="number">5</span>,<span class="number">10</span>], y &lt;- [<span class="number">8</span>,<span class="number">10</span>,<span class="number">11</span>]] <span class="comment">-- list comprehension</span></span><br><span class="line">&gt; [<span class="number">16</span>,<span class="number">20</span>,<span class="number">22</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">55</span>,<span class="number">80</span>,<span class="number">100</span>,<span class="number">110</span>]</span><br></pre></td></tr></table></figure></li>
<li><p><strong>IO</strong> ï¼Œä¸‹é¢çš„IOçš„å®ä¾‹ï¼Œå¯ä»¥æŠŠ getLine çœ‹åšæ˜¯ä¸€ä¸ªå»çœŸå®ä¸–ç•Œä¸­æ‹¿å–å­—ä¸²çš„ç›’å­, è€Œ applicative functor è¡¨è¾¾å¼ä¼šåˆ›é€ ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç›’å­ï¼Œè¿™ä¸ªå¤§ç›’å­ä¼šæ´¾ä¸¤ä¸ªç›’å­å»ç»ˆç«¯æ‹¿å–å­—ä¸²ï¼Œå¹¶æŠŠç»“æœä¸²æ¥èµ·æ¥æ”¾è¿›è‡ªå·±çš„ç›’å­ä¸­ã€‚</p>
 <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">--IO çš„ Applicative instance</span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> <span class="type">IO</span> <span class="keyword">where</span></span></span><br><span class="line">	pure = return</span><br><span class="line">	a &lt;*&gt; b = <span class="keyword">do</span></span><br><span class="line">	    f &lt;- a</span><br><span class="line">	    x &lt;- b</span><br><span class="line">	    return (f x)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å®ä¾‹ å°†è¾“å…¥çš„ä¸¤ä¸ªå­—ç¬¦ä¸²åˆå¹¶</span></span><br><span class="line">(++) &lt;$&gt; getLine &lt;*&gt; getLine</span><br><span class="line"><span class="title">aa</span></span><br><span class="line"><span class="title">bb</span></span><br><span class="line">&gt; <span class="string">"aabb"</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="Applicative-Functor-çš„-gt-r-å½¢æ€"><a href="#Applicative-Functor-çš„-gt-r-å½¢æ€" class="headerlink" title="Applicative Functor çš„ (-&gt;) r å½¢æ€"></a>Applicative Functor çš„ (-&gt;) r å½¢æ€</h2><p> (-&gt;) r å½¢æ€å®šä¹‰</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> ((-&gt;) r) <span class="keyword">where</span></span></span><br><span class="line">    pure x = (\_ -&gt; x)</span><br><span class="line">    f &lt;*&gt; g = \x -&gt; f x (g x)</span><br></pre></td></tr></table></figure>

<ul>
<li>ç”¨ pure å°†ä¸€ä¸ªå€¼åŒ…æˆ applicative functor çš„æ—¶å€™ï¼Œä»–äº§ç”Ÿçš„ç»“æœæ°¸è¿œéƒ½ä¼šæ˜¯é‚£ä¸ªå€¼</li>
<li>å°†ä¸¤ä¸ª applicative functor å–‚ç»™ &lt;*&gt; å¯ä»¥äº§ç”Ÿä¸€ä¸ªæ–°çš„ applicative functor</li>
</ul>
<p>æ¥ç€ç»¼åˆä½¿ç”¨ä¸Šé¢çš„çŸ¥è¯†ï¼Œæ¥çœ‹ä¸€ä¸‹å®é™…åº”ç”¨applicativeçš„å‡ ç§æ–¹å¼ã€‚ç›¸æ¯”èµ·functorï¼Œapplicative functorè¦æ›´å¼ºå¤§å’Œçµæ´»ã€‚</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å·¦ç»“åˆå½¢å¼, ç¬¬ä¸€é¡¹å¿…é¡»ä¸ºå«æœ‰å‡½æ•°çš„functor,å³è¾¹å…¨éƒ¨ä¸ºfunctor</span></span><br><span class="line"><span class="title">pure</span> (\x y z -&gt; x+ y +z) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> <span class="number">4</span> &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line">&gt; <span class="type">Just</span> <span class="number">12</span></span><br><span class="line">[(+<span class="number">3</span>),(*<span class="number">2</span>)] &lt;*&gt; [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">&gt; [<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- fmap(&lt;$&gt;) å½¢å¼,ç¬¬ä¸€é¡¹ä¸ºæ™®é€šå‡½æ•°,å³è¾¹éƒ½ä¸ºfunctor</span></span><br><span class="line">(+) &lt;$&gt; <span class="type">Just</span> <span class="number">1</span> &lt;*&gt; <span class="type">Just</span> <span class="number">2</span></span><br><span class="line">&gt; <span class="type">Just</span> <span class="number">3</span></span><br><span class="line">(\x y z -&gt; x + y +z) &lt;$&gt; [<span class="number">1</span>,<span class="number">2</span>] &lt;*&gt; [<span class="number">2</span>,<span class="number">3</span>] &lt;*&gt; [<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">&gt; [<span class="number">7</span>,<span class="number">8</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">9</span>,<span class="number">10</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- (&lt;$&gt;) (-&gt;) r å½¢å¼,å…¨éƒ¨ä¸ºæ™®é€šå‡½æ•°,ç”¨å•ä¸ªå‚æ•°è°ƒç”¨æ‰§è¡Œ</span></span><br><span class="line">(\x y z -&gt; [x,y,z]) &lt;$&gt; (<span class="number">3</span>+) &lt;*&gt; (*<span class="number">100</span>) &lt;*&gt; (`div`<span class="number">2</span>) $ <span class="number">2</span></span><br><span class="line">&gt; [<span class="number">5</span>,<span class="number">200</span>,<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<h2 id="Applicative-Functor-è¾…åŠ©å‡½æ•°"><a href="#Applicative-Functor-è¾…åŠ©å‡½æ•°" class="headerlink" title="Applicative Functor è¾…åŠ©å‡½æ•°"></a>Applicative Functor è¾…åŠ©å‡½æ•°</h2><ol>
<li><p><strong>liftA2</strong><br>åªæ˜¯applicativeçš„å¥—ç”¨å‡½æ•°è€Œå·²ï¼Œå½“ç„¶è¿˜æœ‰3ä¸ªå‚æ•°çš„ç‰ˆæœ¬ <strong>liftA3</strong>ï¼Œè€Œ <strong>liftA</strong> åˆ™ç­‰ä»·äº <strong>fmap</strong></p>
 <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä¸applicative çš„ç­‰ä»·å½¢å¼</span></span><br><span class="line"><span class="title">liftA2</span> f a b = f &lt;$&gt; a &lt;*&gt; b</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä»¥ä¸‹è¡¨è¾¾å¼åŠŸèƒ½ä¸€è‡´</span></span><br><span class="line"><span class="title">liftA2</span> (:) (<span class="type">Just</span> <span class="number">3</span>) (<span class="type">Just</span> [<span class="number">4</span>])</span><br><span class="line">(:) &lt;$&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> [<span class="number">4</span>]</span><br><span class="line"><span class="title">pure</span> (:) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> [<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">&gt; <span class="type">Just</span> [<span class="number">3</span>,<span class="number">4</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>sequenceA</strong><br>å½“å¥—ç”¨åœ¨å‡½æ•°ä¸Šæ—¶ï¼Œ<strong>sequenceA</strong> æ¥å—è£…æœ‰ä¸€å †å‡½æ•°çš„listï¼Œå¹¶å›ä¼ ä¸€ä¸ªå›ä¼ listçš„å‡½æ•°ã€‚å½“æˆ‘ä»¬æœ‰ä¸€ä¸²å‡½æ•°ï¼Œæƒ³è¦å°†ç›¸åŒè¾“å…¥éƒ½å–‚ç»™å®ƒä»¬å¹¶æŸ¥çœ‹ç»“æœçš„æ—¶å€™ï¼ŒsequenceAéå¸¸å¥½ç”¨ã€‚</p>
<p> å½“ä½¿ç”¨åœ¨ I/O action ä¸Šçš„æ—¶å€™ï¼Œ<strong>sequenceA</strong> è·Ÿ <strong>sequence</strong> æ˜¯ç­‰ä»·çš„ã€‚ä»–æ¥å—ä¸€ä¸² I/O action å¹¶å›ä¼ ä¸€ä¸ª I/O actionï¼Œè¿™ä¸ª I/O action ä¼šè®¡ç®— list ä¸­çš„æ¯ä¸€ä¸ª I/O actionï¼Œå¹¶æŠŠç»“æœæ”¾åœ¨ä¸€ä¸ª list ä¸­</p>
 <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">	<span class="comment">-- ä»¥ä¸‹æ˜¯ä¸¤ç§å®ç°sequenceAåŠŸèƒ½ä¸€è‡´çš„å‡½æ•°</span></span><br><span class="line"><span class="title">sequenceA</span> (x:xs) = (:) &lt;$&gt; x &lt;*&gt; sequenceA xs</span><br><span class="line">	sequenceA = foldr (liftA2 (:)) (pure [])</span><br><span class="line">	</span><br><span class="line">	sequenceA [<span class="type">Just</span> <span class="number">3</span>, <span class="type">Just</span> <span class="number">2</span>, <span class="type">Just</span> <span class="number">1</span>]</span><br><span class="line">	&gt; <span class="type">Just</span> [<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line">	</span><br><span class="line">	<span class="comment">-- å°†listç»„åˆæˆæ‰€æœ‰å¯èƒ½çš„ç»„åˆ</span></span><br><span class="line"><span class="title">sequenceA</span> [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]</span><br><span class="line">	&gt; [[<span class="number">1</span>,<span class="number">4</span>],[<span class="number">1</span>,<span class="number">5</span>],[<span class="number">1</span>,<span class="number">6</span>],[<span class="number">2</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">5</span>],[<span class="number">2</span>,<span class="number">6</span>],[<span class="number">3</span>,<span class="number">4</span>],[<span class="number">3</span>,<span class="number">5</span>],[<span class="number">3</span>,<span class="number">6</span>]]</span><br><span class="line">	</span><br><span class="line">	sequenceA [(&gt;<span class="number">4</span>),(&lt;<span class="number">10</span>),odd] <span class="number">7</span></span><br><span class="line">	map (\f -&gt; f <span class="number">7</span>) [(&gt;<span class="number">4</span>),(&lt;<span class="number">10</span>),odd]</span><br><span class="line">	&gt; [<span class="type">True</span>,<span class="type">True</span>,<span class="type">True</span>]</span><br><span class="line">	</span><br><span class="line">	<span class="comment">-- andæ¥å—ä¸€ä¸²Boolï¼Œå¹¶åœ¨æ‰€æœ‰å€¼éƒ½ä¸ºTrueæ—¶æ‰è¿”å›True</span></span><br><span class="line">	and $ sequenceA [(&gt;<span class="number">4</span>),(&lt;<span class="number">10</span>),odd] <span class="number">7</span></span><br><span class="line">	and $ map (\f -&gt; f <span class="number">7</span>) [(&gt;<span class="number">4</span>),(&lt;<span class="number">10</span>),odd]</span><br><span class="line">	&gt; <span class="type">True</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</div>
    	
		<div class="post-footer">
			<div class="tags">
				<i class="icon-tags"></i> 
				
					
					
						
							<a href="/blog/tags/haskell/">haskell</a>
						
					
				
			</div>
			<a class="share" href="javascript:;" data-url="/blog/2018/08/15/haskellc/" data-desc="
ä»€ä¹ˆæ˜¯Functorfunctor å°±æ˜¯å¯ä»¥æ‰§è¡Œmapæ“ä½œçš„å¯¹è±¡ï¼Œfunctorå°±åƒæ˜¯é™„åŠ äº†..." data-type="share" title="share"><i class="icon-share"></i></a>
		</div>
	</div>
</article>
</div>
<nav class="pagination clearfix">
  
    
      
        <a href="/blog/2018/08/16/haskelld/" class="prev post-prev"> <i class="icon-leftarrow"></i> Haskellå­¦ä¹ -monad</a>
      

      
        <a href="/blog/2018/08/08/haskellb/" class="next post-next"> Haskellå­¦ä¹ -é«˜é˜¶å‡½æ•° <i class="icon-rightarrow"></i></a>
      
    
  
</nav>

<div class="wxshare-popup">
    <a class="close" href="javascript:;"></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <div id="qrcode" class="wx-qrcode"></div>
</div>

    
    <footer class="footer">
<p class="theme">
	Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/edwardzhong/simply.git" target="_blank" rel="noopener">simply</a>
</p>
<p class="copy">Copyright &copy; 2021 Jeff Zhong</p>
</footer>
    <div class="top-bottom">
      <div class="to-top hide" title="to top"><i class="icon-up"></i></div>
      <div class="to-bottom hide" title="to bottom"><i class="icon-down"></i></div>
    </div>
    </div>

  </div>
<input type="hidden" name="isPost" id="isPost" value="true">
<i id="barBtn" class="icon icon-menu"></i>
<div id="payMe" class="payme">
    <i class="icon icon-cancel"></i>
    <p class="pay-title">ç»™æˆ‘çš„æ—©é¤åŠ ä¸ªè›‹å§ ğŸ˜Š</p>
    <div>
      <img src="/images/weixinpay.jpg" alt="weixinpay">
      <img src="/images/alipay.jpg" alt="alipay" style="display:none;">
    </div>
    <div class="pay-selects">
        <input type="radio" name="pay" id="weixinpay" checked="checked"><label for="weixinpay"> å¾®ä¿¡ </label>&nbsp;&nbsp;
        <input type="radio" name="pay" id="alipay"><label for="alipay"> æ”¯ä»˜å® </label>
    </div>
</div>

  
  
    <script src="./lib/jquery-2.2.3.min.js"></script>
  
    <script src="./lib/qrcode.min.js"></script>
  
    <script src="./js/index.js"></script>
  

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</body>
</html>
